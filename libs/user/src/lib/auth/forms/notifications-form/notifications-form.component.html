<section class="surface">
  <h2>General Notifications</h2>

  <article fxLayout="row" fxLayoutAlign="space-between">
    <p>Receive all general notifications :</p>
    <div fxLayout="row" fxLayoutGap="40px">
      <mat-slide-toggle color="primary" labelPosition="before" [checked]="form.get('default').get('email').value" name="email" (change)="toogleDefault($event)">Email :</mat-slide-toggle>
      <mat-slide-toggle color="primary" labelPosition="before" [checked]="form.get('default').get('app').value" name="app" (change)="toogleDefault($event)">App :</mat-slide-toggle>
    </div>
  </article>

  <!-- <article fxLayout="row" fxLayoutAlign="space-between">
    <p>Receive notifications via :</p>
    <div fxLayout="row" fxLayoutGap="40px">
      <mat-checkbox color="primary" name="selectAllEmail" (change)="selectAll($event)" [indeterminate]="">By e-mail</mat-checkbox>
      <mat-slide-toggle color="primary" labelPosition="before" name="selectAllApp" (change)="selectAll($event)">In app :</mat-slide-toggle>
    </div>
  </article> -->
</section>

<!-- <section class="surface" fxLayout=column>
  <h2>Company Management Notifications</h2>

  <article fxLayout="row" fxLayoutAlign="space-between">
    <p>A new user requests to join your organization.
      <mat-icon svgIcon="info" matTooltip="This notification can't be disabled since you need to answer it."></mat-icon>
    </p>
    <div fxLayout="row" fxLayoutGap="16px">
      <mat-checkbox color="primary" [checked]="selectAllEmail">By e-mail</mat-checkbox>
      <mat-checkbox color="primary" checked="true" disabled>In app</mat-checkbox>
    </div>
  </article>

  <article fxLayout="row" fxLayoutAlign="space-between">
    <p>A new member joins your organization.</p>
    <div fxLayout="row"fxLayoutGap="16px">
      <mat-checkbox color="primary" [checked]="selectAllEmail">By e-mail</mat-checkbox>
      <mat-checkbox color="primary" [checked]="selectAllApp">In app</mat-checkbox>
    </div>
  </article>
</section> -->

<table>
  <ng-container *ngFor="let row of notifications, let index = index">
    <tbody *ngIf="showNotifications(index)">
      <tr>
        <th>{{ row.title }}</th>
        <th><mat-checkbox [indeterminate]="someComplete(index, 'email')" [checked]="row.completed.email" (change)="setAll($event.checked, index, 'email')"></mat-checkbox>By e-mail</th>
        <th><mat-checkbox [indeterminate]="someComplete(index, 'app')" [checked]="row.completed.app" (change)="setAll($event.checked, index, 'app')"></mat-checkbox>In app</th>
      </tr>
      <tr *ngFor="let subrow of row.subNotification, let subIndex = index">
        <td>{{ subrow.subtitle }}</td>
        <td><mat-checkbox [checked]="subrow.email" name="emailCheckbox" (change)="updateAllComplete(index, subIndex, $event, 'email')"></mat-checkbox></td>
        <td><mat-checkbox [checked]="subrow.app" name="appCheckbox" (change)="updateAllComplete(index, subIndex, $event, 'app')"></mat-checkbox></td>
      </tr>
    </tbody>
  </ng-container>

</table>
