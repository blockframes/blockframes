<section class="surface general">
  <h2>Notifications Settings</h2>
  <article fxLayout="row" fxLayoutAlign="space-between">
    <p>Activate all the notifications :</p>
    <div fxLayout="row" fxLayoutGap="32px">
      <mat-slide-toggle color="primary" labelPosition="before" name="email" checked="true" (change)="toogleAll($event)">By Email:</mat-slide-toggle>
      <mat-slide-toggle color="primary" labelPosition="before" name="app" checked="true" (change)="toogleAll($event)">In App:</mat-slide-toggle>
    </div>
  </article>
</section>

<section class="surface" *ngFor="let row of notifications, let index = index">
  <table>
      <tbody *ngIf="showNotifications(index)">
        <tr>
          <th class="description"><h2>{{ row.title }}</h2></th>
          <th>
            <mat-checkbox
              color="primary"
              [indeterminate]="someComplete(index, 'email')"
              [checked]="row.completed.email"
              (change)="setAll($event.checked, index, 'email')">
            </mat-checkbox>
            By email
          </th>
          <th>
            <mat-checkbox
              color="primary"
              [indeterminate]="someComplete(index, 'app')"
              [checked]="row.completed.app"
              (change)="setAll($event.checked, index, 'app')">
            </mat-checkbox>
            In App
          </th>
        </tr>
        <tr><span class="mat-caption">Receive notifications when:</span></tr>
        <tr *ngFor="let subrow of row.subNotification, let subIndex = index">
          <td class="description">{{ subrow.subtitle }}  <b>({{ subrow.notificationType}})</b></td>
          <td>
            <mat-checkbox
              color="primary"
              [checked]="subrow.email"
              name="email"
              (change)="updateAllComplete(index, subIndex, $event)"
              [formControl]="form.get(subrow.notificationType).get('email')"
              >
            </mat-checkbox>
          </td>
          <td>
            <mat-checkbox
              color="primary"
              [checked]="subrow.app"
              name="app"
              (change)="updateAllComplete(index, subIndex, $event)"
              [formControl]="form.get(subrow.notificationType).get('app')"
              >
            </mat-checkbox>
          </td>
        </tr>
      </tbody>
  </table>
</section>
