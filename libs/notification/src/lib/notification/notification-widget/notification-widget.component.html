<section *ngIf="(user$ | async) as user" test-id="notification-widget" >
  <button mat-icon-button [widgetTarget]="notifications">
    <ng-container *ngIf="(totalCount$ | async) as count; else: empty">
      <mat-icon svgIcon="bell"
        color="primary"
        [matBadge]="count"
        matBadgeColor="accent"
        matBadgeSize="medium">
      </mat-icon>
    </ng-container>
    <ng-template #empty >
      <mat-icon>notifications_none</mat-icon>
    </ng-template>
  </button>
</section>

<overlay-widget #notifications test-id="notification-list">
  <widget-card>
    <header widgetHeader color="primary" fxLayout="row" fxLayoutAlign="space-between center">
      <span>Recent Activity</span>
    </header>
    <invitation-list></invitation-list>
    <notification-list></notification-list>
    <footer widgetFooter>
      <a mat-button color="primary" [routerLink]="page">
        <span>View All Activity</span>
        <mat-icon svgIcon="arrow_forward"></mat-icon>
      </a>
    </footer>
  </widget-card>
</overlay-widget>
