<tunnel-page>
  <ng-container tunnel-form>

    <h3>Images</h3>
    <section id="promotional-images">

      <h6 class="mat-caption">Promotional Images</h6>
      <ng-container *ngFor="let still of stillPhoto.controls; let i = index; trackBy: trackByFn">
        <article>
          <image-uploader 
            [meta]="['movies', 'still_photo', movieId]" 
            ratio="still"
            [queueIndex]="i | fileListIndex: stillPhoto.value"
            [form]="still"
            [formIndex]="i"
            (newSubscription)="shell.addSubToStack($event)"
            listenToChanges
            pushSubToStack
            [attr.test-id]="'image-upload_' + i"
          >
            <h3 title>Stills</h3>
          </image-uploader>
          <span class="mat-caption">Please note that this document will be available for download on the
            marketplace.</span>
        </article>
      </ng-container>

      <footer fxLayout="row" fxLayoutAlign="start baseline" fxLayoutGap="16px">
        <mat-divider></mat-divider>
        <span class="mat-caption text-primary">Add Images</span>
        <button mat-mini-fab color="primary" (click)="addStill()" test-id="add">
          <mat-icon svgIcon="add"></mat-icon>
        </button>
      </footer>

    </section>

  </ng-container>
</tunnel-page>
