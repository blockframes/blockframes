<form [formGroup]="salesInfo">
  <!-- SCORING -->
  <h3> Scoring </h3>
  <mat-form-field appearance="outline">
    <mat-select formControlName="scoring" placeholder="Scoring">
      <mat-option *ngFor="let scoring of staticModels.SCORING" [value]="scoring.slug">
        {{ scoring.label }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <!-- COLOR -->
  <h3> Color </h3>
  <mat-form-field appearance="outline">
    <mat-select formControlName="color" placeholder="Color">
      <mat-option *ngFor="let color of staticModels.COLORS" [value]="color.slug">
        {{ color.label }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <!-- EUROPEAN QUALIFICATION -->
  <h3> European Qualification </h3>
  <mat-checkbox formControlName="europeanQualification">European Qualification</mat-checkbox>
  <!-- RATING -->
  <h3> Rating </h3>
  <div formArrayName="rating" *ngFor="let rating of salesInfo.rating.controls; let i = index">
    <div [formGroupName]="i" class="full-width">
      <h4>{{ getRatingSystem(i) }}</h4>
      <mat-form-field appearance="outline" class="small-margin">
        <mat-select formControlName="country" placeholder="Country">
          <mat-option>
            <ngx-mat-select-search [formControl]="countriesFilterCtrl" [placeholderLabel]="'Search...'"
              [noEntriesFoundLabel]="'no matching country found'"></ngx-mat-select-search>
          </mat-option>
          <mat-option *ngFor="let country of countries$ | async" [value]="country.slug">
            {{ country.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" class="small-margin">
        <mat-select formControlName="system" placeholder="System">
          <mat-option>
            <ngx-mat-select-search [formControl]="ratingSystemFilterCtrl" [placeholderLabel]="'Search...'"
              [noEntriesFoundLabel]="'no matching system found'"></ngx-mat-select-search>
          </mat-option>
          <mat-option *ngFor="let system of ratingSystems$ | async" [value]="system.slug">
            {{ system.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" class="small-margin">
        <mat-label>Reason</mat-label>
        <input matInput formControlName="reason" placeholder="Rating reason">
      </mat-form-field>
      <mat-form-field appearance="outline" class="small-margin">
        <mat-label>Value</mat-label>
        <input matInput formControlName="value" placeholder="Value">
      </mat-form-field>
      <button mat-icon-button color="primary" (click)="salesInfo.addRating()">
        <mat-icon>add_circle</mat-icon>
      </button>
      <button mat-icon-button color="primary" (click)="salesInfo.removeRating(i)">
        <mat-icon>delete_circle</mat-icon>
      </button>
    </div>
  </div>
  <button mat-icon-button color="primary" (click)="salesInfo.addRating()">
    <mat-icon>add_circle</mat-icon>
  </button>
  <!-- CERTIFICATIONS -->
  <h3> Certifications </h3>
  <mat-form-field appearance="outline" class="full-width">
    <mat-select formControlName="certifications" placeholder="Certifications" multiple>
      <mat-option>
        <ngx-mat-select-search [formControl]="certificationsFilterCtrl" [placeholderLabel]="'Search...'"
          [noEntriesFoundLabel]="'no matching certifiation found'"></ngx-mat-select-search>
      </mat-option>
      <mat-option *ngFor="let certification of certifications$ | async" [value]="certification.slug">
        {{ certification.label }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <!-- ORIGINAL RELEASE -->
  <h3> Original Release(s) </h3>
  <div formArrayName="originalRelease" *ngFor="let release of salesInfo.originalRelease.controls; let i = index">
    <div [formGroupName]="i" class="full-width">
      <h4>{{ getOriginalRelease(i) }}</h4>  
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Date</mat-label>
        <input matInput placeholder="Choose release date" formControlName="date" />
      </mat-form-field>
      <mat-form-field appearance="outline" class="small-margin">
        <mat-select formControlName="country" placeholder="Country">
          <mat-option>
            <ngx-mat-select-search [formControl]="countriesFilterCtrl" [placeholderLabel]="'Search...'"
              [noEntriesFoundLabel]="'no matching country found'"></ngx-mat-select-search>
          </mat-option>
          <mat-option *ngFor="let country of countries$ | async" [value]="country.slug">
            {{ country.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" class="full-width">
        <mat-select formControlName="media" placeholder="Media">
          <mat-option>
            <ngx-mat-select-search [formControl]="mediasFilterCtrl" [placeholderLabel]="'Search...'"
              [noEntriesFoundLabel]="'no matching media found'"></ngx-mat-select-search>
          </mat-option>
          <mat-option *ngFor="let media of medias$ | async" [value]="media.slug">
            {{ media.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <button mat-icon-button color="primary" (click)="salesInfo.addOriginalRelease()">
        <mat-icon>add_circle</mat-icon>
      </button>
      <button mat-icon-button color="primary" (click)="salesInfo.removeOriginalRelease(i)">
        <mat-icon>delete_circle</mat-icon>
      </button>
    </div>
  </div>
  <button mat-icon-button color="primary" (click)="salesInfo.addOriginalRelease()">
    <mat-icon>add_circle</mat-icon>
  </button>
  <!-- Broadcaster coproducers -->
  <h3> TV / Platform coproducer(s), if any </h3>
  <div formArrayName="broadcasterCoproducers" *ngFor="let broadcasterCoproducer of salesInfo.broadcasterCoproducers.controls; let i = index">
    <div class="full-width">
      <mat-form-field appearance="outline" class="small-margin">
        <mat-label>Coproducers</mat-label>
        <textarea matInput #synopsis [formControlName]="i" maxlength="500" placeholder="TV / Platform coproducer"
          type="string"></textarea>
      </mat-form-field>
      <button *ngIf="salesInfo.broadcasterCoproducers.controls.length < 3" mat-icon-button color="primary"
        (click)="salesInfo.addBroadcasterCoproducers()">
        <mat-icon>add_circle</mat-icon>
      </button>
      <button mat-icon-button color="primary" (click)="salesInfo.removeBroadcasterCoproducers(i)">
        <mat-icon>delete_circle</mat-icon>
      </button>
    </div>
  </div>
  <ng-container *ngIf="salesInfo.broadcasterCoproducers.controls.length === 0">
    <button mat-icon-button color="primary" (click)="salesInfo.addBroadcasterCoproducers()">
      <mat-icon>add_circle</mat-icon>
    </button>
  </ng-container>
</form>
