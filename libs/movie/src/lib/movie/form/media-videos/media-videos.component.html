<tunnel-page>
  <ng-container tunnel-form>

    <h3>Screener</h3>
    <section>
      <p>The screener is the full video of this title, it will be used for virtual screenings.</p>

      <ng-container *ngIf="hasScreener; else noScreener">
        <mat-list>
          <mat-list-item>
            <mat-icon mat-list-icon [svgIcon]="screenerForm.get('fileName').value | fileTypeImage: 'icon'"></mat-icon>
            <div mat-line>{{screenerForm.get('fileName').value}}</div>
            <button mat-icon-button (click)="deleteScreener()"><mat-icon svgIcon="trash"></mat-icon></button>
          </mat-list-item>
        </mat-list>
      </ng-container>
      <ng-template #noScreener>
        <file-upload
          [form]="screenerForm"
          [storagePath]="getPath('screener')"
          allowedFileType="video"
          filePrivacy="protected">
            <h3 title>Upload Screener</h3>
        </file-upload>
        <p class="mat-caption">This video is <strong>private</strong> and <strong>cannot be seen by anyone</strong> outside your organization unless you explicitly invite them to a virtual screening.</p>
      </ng-template>
    </section>

    <mat-divider class="thick"></mat-divider>

    <h3>Other Videos</h3>
    <section>
      <p>Upload other videos such as trailer, teaser, promotional clip, etc...</p>

      <bf-form-list [form]="videoList" listPosition="bottom" autoAdd reverseList>
        <ng-template itemRef let-video>
          {{ !!video.ref.fileName ? video.ref.fileName : (video.ref.ref | fileName) }}
        </ng-template>
        <ng-template formView let-activeForm>
          <file-upload [form]="activeForm.get('ref')" [storagePath]="getPath('otherVideos')" allowedFileType="video" >
            <h3 title>Upload Video</h3>
          </file-upload>
        </ng-template>
      </bf-form-list>
    </section>

  </ng-container>
</tunnel-page>
