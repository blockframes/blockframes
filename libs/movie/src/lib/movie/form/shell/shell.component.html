<tunnel-layout *ngIf="steps$ | async as steps" [steps]="steps" [exitRedirect]="exitRoute$ | async">
  <header fxLayout="row" fxLayoutAlign="space-between center">
    <tunnel-step-stat></tunnel-step-stat>
    <app-logo></app-logo>
    <button test-id="tunnel-step-save" mat-stroked-button color="primary" (click)="layout.save()">
      <mat-icon svgIcon="save"></mat-icon>
      <span>Save</span>
    </button>
  </header>

  <aside>
    <tunnel-nav [steps]="steps"></tunnel-nav>
  </aside>
  <ng-template #confirmExit>
    <div class="confirm-exit" fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="16px">
      <h1>You are about to leave the form.</h1>
      <p>Some changes have not been saved. If you leave now, you will lose these changes.</p>
      <div fxLayout="row" fxLayoutAlign="center">
        <button class="save" mat-flat-button color="primary" [mat-dialog-close]="true">
          Save & Exit</button>
        <button class="text-primary" mat-button [mat-dialog-close]="false">
          Close without saving
        </button>
      </div>
    </div>
  </ng-template>
</tunnel-layout>