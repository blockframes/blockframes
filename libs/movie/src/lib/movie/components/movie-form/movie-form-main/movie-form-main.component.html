<div [formGroup]="form">
  <!-- TITLES -->
  <h3> Titles </h3>
  <mat-form-field class="full-width">
    <input matInput type="text" placeholder="Original title" formControlName="originalTitle" required/>
    <mat-error *ngIf="form.get('originalTitle').hasError('required')">
      Original title is <strong>required</strong>
    </mat-error>
  </mat-form-field>
  <mat-form-field class="full-width">
    <input matInput type="text" placeholder="International title" formControlName="internationalTitle" required/>
    <mat-error *ngIf="form.get('internationalTitle').hasError('required')">
      International title is <strong>required</strong>
    </mat-error>
  </mat-form-field>

  <h3> Directed By </h3>
  <mat-form-field class="full-width">
    <input matInput type="text" placeholder="Director name" formControlName="directorName" required/>
    <mat-error *ngIf="form.get('directorName').hasError('required')">
      Director name is <strong>required</strong>
    </mat-error>
  </mat-form-field>

  <!-- POSTER -->
  <h3> Poster </h3>
  <mat-card class="movie-poster-thumbnail mat-elevation-z0">
    <ng-container *ngIf="form.currentFormValue('poster'); else fileUpload">
      <img mat-card-image [src]="form.currentFormValue('poster')">
      <mat-card-actions>
        <button mat-raised-button color="warn" (click)="form.setPoster('')">
          <mat-icon>delete_circle</mat-icon> Remove
        </button>
      </mat-card-actions>
    </ng-container>
    <ng-template #fileUpload>
      <file-upload
        accept="['.jpg', '.png']"
        path='test'
        [types]="['image/jpeg', 'image/png']"
        [uploadOnFirestore]="true"
        (storeUploaded)="form.setPoster($event)"
      ></file-upload>
    </ng-template>
  </mat-card>
  <h3> Production </h3>
  <mat-form-field class="full-width">
    <input matInput type="number" placeholder="Production year" formControlName="productionYear"/>
    <mat-error *ngIf="form.get('productionYear').hasError('pattern')">
      Invalid year.
    </mat-error>
  </mat-form-field>

  <!-- GENRES -->
  <h3> Genres </h3>
  <mat-form-field class="full-width">
    <mat-select formControlName="genres" placeholder="Genres" multiple>
      <mat-option>
        <ngx-mat-select-search
          [formControl]="genresFilterCtrl"
          [placeholderLabel]="'Search...'"
          [noEntriesFoundLabel]="'no matching genre found'"
        ></ngx-mat-select-search>
      </mat-option>
      <mat-option *ngFor="let genre of genres$ | async" [value]="genre.slug">
        {{ genre.label }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <!-- ORIGIN COUNTRY -->
  <h3> Origin Country </h3>
  <mat-form-field class="full-width">
    <mat-select formControlName="originCountry" placeholder="Origin Country">
      <mat-option>
        <ngx-mat-select-search
          [formControl]="countriesFilterCtrl"
          [placeholderLabel]="'Search...'"
          [noEntriesFoundLabel]="'no matching country found'"
        ></ngx-mat-select-search>
      </mat-option>
      <mat-option *ngFor="let country of countries$ | async" [value]="country.slug">
        {{ country.label }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <!-- CO-PRODUCER COUNTRIES -->
  <h3> Co Producers Countries </h3>
  <mat-form-field class="full-width">
    <mat-select formControlName="coProducerCountries" placeholder="Co Producers Countries" multiple>
      <mat-option>
        <ngx-mat-select-search
          [formControl]="countriesFilterCtrl"
          [placeholderLabel]="'Search...'"
          [noEntriesFoundLabel]="'no matching country found'"
        ></ngx-mat-select-search>
      </mat-option>
      <mat-option *ngFor="let country of countries$ | async" [value]="country.slug">
        {{ country.label }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <!-- LANGUAGES -->
  <h3> Languages </h3>
  <mat-form-field class="full-width">
    <mat-select formControlName="languages" placeholder="Film Languages" multiple>
      <mat-option>
        <ngx-mat-select-search
          [formControl]="languagesFilterCtrl"
          [placeholderLabel]="'Search...'"
          [noEntriesFoundLabel]="'no matching language found'"
        ></ngx-mat-select-search>
      </mat-option>
      <mat-option *ngFor="let language of languages$ | async" [value]="language.slug">
        {{ language.label }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <!-- STATUS -->
  <h3> Status </h3>
  <mat-form-field>
    <mat-select formControlName="status" placeholder="Status">
      <mat-option *ngFor="let status of staticModels.MOVIE_STATUS" [value]="status.slug">
        {{ status.label }}
      </mat-option>
    </mat-select>
  </mat-form-field>
</div>
