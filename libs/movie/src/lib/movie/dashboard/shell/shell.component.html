<section fxLayout="column">
  <header fxLayout fxLayout.lt-md="column" fxLayoutGap="16px">
    <ng-container *ngIf="movie$ | async as movie">
      <section fxLayout fxLayoutGap="16px" fxFlex>
        <img fxHide.xs [ref]="movie.poster" asset="empty_poster.svg" alt="movie poster">

        <article fxLayout="column" fxFlex>
          <h4>{{ movie | movieFeature }}</h4>
          <h1>{{ movie.title.international }}</h1>
          <h6>{{ movie.directors | displayName }}</h6>
          <p>
            <span>{{ movie.originCountries | toLabel: 'territories'}}</span>
            <span *ngIf="movie.originCountries.length && movie.release.year"> - </span>
            <span>{{ movie.release.year }}</span>
          </p>
        </article>
      </section>
      <aside fxLayout="column" fxLayout.lt-md="row" fxLayoutAlign="start end" fxLayoutGap="8px">
        <a mat-button [routerLink]="['/c/o/dashboard/tunnel/movie', movie.id]">
          <mat-icon svgIcon="edit"></mat-icon>
          <span>Edit</span>
        </a>
        <ng-container *ngIf="org$ | async | canAccess: 'marketplace': appName">
          <a mat-button [routerLink]="['/c/o/marketplace/title', movie.id, 'main']">
            <mat-icon svgIcon="marketplace"></mat-icon>
            <span>Marketplace Preview</span>
          </a>
        </ng-container>
        <ng-content></ng-content>
      </aside>
    </ng-container>
  </header>

  <nav mat-tab-nav-bar>
    <a mat-tab-link *ngFor="let link of routes" [routerLink]="link.path" routerLinkActive #rla="routerLinkActive"
      [active]="rla.isActive">
      {{link.label}}
    </a>
  </nav>

  <div [@routeAnimation]="animationOutlet(outlet)">
    <router-outlet #outlet="outlet"></router-outlet>
  </div>

</section>
