<ng-template *ngIf="loading$ | async">
  <mat-spinner color="accent" #loading></mat-spinner>
</ng-template>
<ng-container *ngIf="(movie$ | async) as movie;" test-id="content" >
  
  <mat-card *ngIf="movie.cast || movie.crew || movie.stakeholders">
    <mat-card-header>
      <h3>Credits</h3>
    </mat-card-header>
    <mat-card-content>
      <ul>
        <ng-container *ngIf="movie.cast.length > 0">
          <h5>CAST</h5>
          <li><strong i18n>Principal Cast </strong>
            <ng-container *ngFor="let cast of movie.cast; let isLast  = last">
              <span>{{ cast.firstName }} {{ cast.lastName }}{{ isLast? '' : ', '}}</span>
            </ng-container>
          </li>
        </ng-container>
        <ng-container *ngIf="movie.stakeholders || movie.producers.length > 0">
          <h5>COMPANY CREDITS</h5>
          <ng-container *ngIf="movie.stakeholders as stakeholders">
            <li *ngIf="stakeholders.productionCompany.length > 0"><strong i18n>Executive Producer{stakeholders.productionCompany.length, plural,=1 {} other {s}}</strong>
              <span> {{ getStakeholder(movie, 'productionCompany') }}</span></li>
            <li *ngIf="stakeholders.coProductionCompany.length > 0"><strong i18n>Co-Producer{stakeholders.coProductionCompany.length, plural,=1 {} other {s}}</strong>
              <span> {{ getStakeholder(movie, 'coProductionCompany') }}</span></li>
          </ng-container>
          <ng-container *ngIf="movie.producers.length > 0">
            <li><strong i18n>Producer{movie.producers.length, plural,=1 {} other {s}}</strong>
              <span> {{ getSalesCast(movie, 'producers') }}</span></li>
          </ng-container>
          <ng-container *ngIf="movie.stakeholders as stakeholders">
            <li *ngIf="stakeholders.distributor.length > 0"><strong i18n>Distributor{stakeholders.distributor.length, plural,=1 {} other {s}}</strong>
              <span> {{ getStakeholder(movie, 'distributor') }}</span></li>
            <li *ngIf="stakeholders.salesAgent.length > 0"><strong i18n>Sales Agent{stakeholders.salesAgent.length, plural,=1 {} other {s}}</strong>
              <span> {{ getStakeholder(movie, 'salesAgent') }}</span></li>
          </ng-container>
        </ng-container>
        <ng-container *ngIf="movie.crew.length > 0">
          <b>ARTISIC CREW</b>
          <ng-container *ngFor="let crew of movie.crew; let isLast = last">
            <li *ngIf="crew.role === 'score-composer'"><strong i18n>Score Composer{crew.length, plural,=1 {} other {s}} </strong>
              <span>{{ crew.firstName }} {{ crew.lastName }} ({{ crew.role }}) {{ isLast ? '' : ', ' }}</span>
            <li *ngIf="crew.role === 'writer' as writer"><strong i18n>Writer{writer.length, plural,=1 {} other {s}} </strong>
              <span>{{ crew.firstName }} {{ crew.lastName }} ({{ crew.role }}) {{ isLast ? '' : ', ' }}</span>
          </ng-container>
        </ng-container>
      </ul>
    </mat-card-content>
  </mat-card>

</ng-container>