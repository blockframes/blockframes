<ng-container *ngIf="movie$ | async as movie">
  <!-- App bar -->
  <ng-template pageBar targetId="nav">
    <header fxLayout fxLayoutAlign="start center">
      <app-menu></app-menu>
      <ng-container *ngFor="let link of routes">
        <ng-container *ngIf="movie | hasKeys : (link.requireKeys || [])">
          <a mat-button [color]="rla.isActive ? 'primary' : ''" [routerLink]="link.path" routerLinkActive
            #rla="routerLinkActive">
            {{link.label}}
          </a>
        </ng-container>
      </ng-container>
    </header>
  </ng-template>

  <!-- Header -->
  <ng-content select="movie-header"></ng-content>

  <!-- Content -->
  <nav id="nav" mat-tab-nav-bar>
    <ng-container *ngFor="let link of routes">
      <ng-container *ngIf="movie | hasKeys : (link.requireKeys || [])">
        <a mat-tab-link [routerLink]="link.path" routerLinkActive #rla="routerLinkActive"
          [active]="rla.isActive">
          {{link.label}}
        </a>
      </ng-container>
    </ng-container>
  </nav>
  <section [@routeAnimation]="animationOutlet(outlet)">
    <router-outlet #outlet="outlet"></router-outlet>
  </section>

  <ng-content></ng-content>

  <!-- Footer -->
  <footer>
    <article *ngIf="movie | hasKeys: ['promotional.scenario', 'promotional.moodboard', 'promotional.presentation_deck']">
      <h2>Files</h2>
      <div grid>
        <mat-card [col]="3" *ngIf="movie.promotional.presentation_deck as deck">
          <img asset="deck.webp" />
          <a mat-button [href]="deck | getUrl | async" target="_blank">
            <mat-icon svgIcon="download"></mat-icon>
            <span>Presentation Deck</span>
          </a>
        </mat-card>
        <mat-card [col]="3" *ngIf="movie.promotional.scenario as scenario">
          <img asset="scenario.webp" />
          <a mat-button [href]="scenario | getUrl | async" target="_blank">
            <mat-icon svgIcon="download"></mat-icon>
            <span>Scenario</span>
          </a>
        </mat-card>
        <mat-card [col]="3" *ngIf="movie.promotional.moodboard as moodboard">
          <img asset="moodboard.webp" />
          <a mat-button [href]="moodboard | getUrl | async" target="_blank">
            <mat-icon svgIcon="download"></mat-icon>
            <span>Moodboard</span>
          </a>
        </mat-card>
      </div>
    </article>

    <article *ngIf="movie.promotional.still_photo.length">
      <h2>Images</h2>
      <bf-carousel flex [min]="3">
        <ng-container *ngFor="let photo of movie.promotional.still_photo">
          <img carouselItem [col]="4" [ref]="photo" asset="empty_poster.webp" >
        </ng-container>
      </bf-carousel>
    </article>
  </footer>
</ng-container>