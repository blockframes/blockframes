<ng-container *ngIf="(movie$ | async) as movie" test-id="content">
  <h2 *ngIf="movie | hasKeys: keys">Production Details</h2>

  <section *ngIf="movie.stakeholders.productionCompany.length">
    <h3>Production Companies</h3>
    <article *ngFor="let company of movie.stakeholders.productionCompany; let i = index" [attr.test-id]="'prod-company_' + i">
      <h5>{{ company.countries | toLabel : 'territories' }}</h5>
      <p>{{ company.displayName }}</p>
    </article>

    <mat-divider></mat-divider>
  </section>


  <section *ngIf="movie.stakeholders.coProductionCompany.length">
    <h3>Co-Production Companies</h3>
    <article *ngFor="let company of movie.stakeholders.coProductionCompany; let i = index" [attr.test-id]="'co-prod-company_' + i">
      <h5>{{ company.countries | toLabel : 'territories' }}</h5>
      <p>{{ company.displayName }}</p>
    </article>

    <mat-divider></mat-divider>
  </section>


  <section *ngIf="movie.producers.length">
    <h3>Producers</h3>
    <article *ngFor="let producer of movie.producers; let i = index" [attr.test-id]="'producer_' + i">
      <h5>{{ producer.role | toLabel: 'producerRoles' }}</h5>
      <p>{{ producer | displayName }}</p>
    </article>

    <mat-divider></mat-divider>
  </section>


  <section *ngIf="movie.stakeholders.distributor.length">
    <h3>Distributors</h3>
    <article *ngFor="let distributor of movie.stakeholders.distributor; let i = index" [attr.test-id]="'distributor_' + i">
      <h5>{{ distributor.displayName }}</h5>
      <p>{{ distributor.countries | toLabel : 'territories' }}</p>
    </article>

    <mat-divider></mat-divider>
  </section>


  <section *ngIf="movie.stakeholders.salesAgent.length">
    <h3>International Sales</h3>
    <article *ngFor="let salesAgent of movie.stakeholders.salesAgent; let i = index" [attr.test-id]="'international-sales_' + i">
      <h5>{{ salesAgent.countries | toLabel : 'territories' }}</h5>
      <p>{{ salesAgent.displayName }}</p>
    </article>

    <mat-divider></mat-divider>
  </section>

  <section *ngIf="movie | hasKeys: 'shooting'">
    <h3>Shooting Information</h3>
    <article>
      <h5>Shooting date</h5>
      <p>{{ movie.shooting | shootingDates }}</p>
    </article>
    <article>
      <h5>Shooting locations</h5>
      <p>{{ movie.shooting | shootingLocations | titlecase}}</p>
    </article>
    <article *ngIf="movie.expectedPremiere.date">
      <h5>Expected premiere</h5>
      <p>{{ movie.expectedPremiere.event }} -
        <ng-container *ngIf="!!movie.expectedPremiere.date">
          {{ movie.expectedPremiere.date | date: 'longDate' }}
        </ng-container>
      </p>
    </article>
  </section>


</ng-container>