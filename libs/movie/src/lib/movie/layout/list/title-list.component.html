<!-- TODO fix pageBar conflicting with another pageBar in catalog -->
<!-- <ng-template pageBar targetId="nav">
  <header fxLayout="row" fxLayoutAlign="start center" fxLayoutGap.gt-sm="10px">
    <div fxFlex>
      <ng-template [ngTemplateOutlet]="titleSearchTemplate"></ng-template>
    </div>
    <div fxLayout="row" fxLayoutAlign="start center" class="sort">
      <button *ngIf="canToggle" mat-icon-button (click)="listView = !listView">
        <ng-container *ngIf="!listView">
          <mat-icon matPrefix svgIcon="list"></mat-icon>
        </ng-container>
        <ng-container *ngIf="listView">
          <mat-icon matPrefix svgIcon="grid"></mat-icon>
        </ng-container>
      </button>
      <ng-template [ngTemplateOutlet]="titleSortTemplate"></ng-template>
    </div>
  </header>
</ng-template> -->


<!-- we use class="dark-contrast-theme" to override theme style of the header because it always has a "dark" background image -->
<header id="nav" class="dark-contrast-theme">
  <h1 class="mat-display-2">On the market today</h1>
  <section fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="32px">

    <span class="search">
      <!-- MAIN SEARCH BAR -->
      <ng-template [ngTemplateOutlet]="titleSearchTemplate"></ng-template>
    </span>

    <span>
      <button *ngIf="canToggle" mat-icon-button (click)="listView = !listView">
        <ng-container *ngIf="!listView">
          <mat-icon matPrefix svgIcon="list"></mat-icon>
        </ng-container>
        <ng-container *ngIf="listView">
          <mat-icon matPrefix svgIcon="grid"></mat-icon>
        </ng-container>
      </button>

      <!-- SORT CONTROL-->
      <ng-template [ngTemplateOutlet]="titleSortTemplate"></ng-template>

    </span>
  </section>
</header>

<!-- FILTER SIDE CARD -->
<section fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="50px" fxLayout.lt-md="column"
  fxLayoutAlign.lt-md="center center" class="filters">
  <aside fxLayout="column" class="filter">
    <mat-card>

      <ng-content></ng-content>

    </mat-card>
  </aside>

  <!-- List || card of result -->
  <article>
    <ng-container *ngIf="titles; else loading">
      <ng-container *ngIf="titles.length else empty">
        <div fxLayout="row" fxLayoutAlign="end start">
          <span i18n *ngIf="titles.length as count" class="mat-body-2">
            There {count, plural, =0 {} =1 {is} other {are}} {{ count }} title{count, plural, =0 {} =1 {} other {s}} available.
          </span>
        </div>
      </ng-container>
        <div fxLayout="row wrap" fxLayoutGap="24px" fxLayoutGap.lt-lg="0px" fxLayout.lt-sm="column" fxLayoutAlign.lt-lg="space-between center">
          <ng-container *ngIf="!listView; else displayList">
            <ng-container *ngFor="let title of titles">

              <!-- INSERT CARD -->
              <ng-template
                [ngTemplateOutlet]="titleCardTemplate"
                [ngTemplateOutletContext]="{$implicit: title}"
              ></ng-template>

            </ng-container>
          </ng-container>
          <ng-template #displayList>
            <ng-container *ngFor="let title of titles">

              <!-- INSERT LIST ITEM -->
              <ng-template
                [ngTemplateOutlet]="titleListItemTemplate"
                [ngTemplateOutletContext]="{$implicit: title}"
              ></ng-template>

            </ng-container>
          </ng-template>
        </div>
    </ng-container>
    <ng-template #loading>
      <mat-progress-spinner mode="indeterminate" color="primary"></mat-progress-spinner>
    </ng-template>
    <ng-template #empty>
      <div fxLayout="row" fxLayoutAlign="end start">
        <h6>There is no corresponding title.</h6>
      </div>
    </ng-template>
  </article>
</section>
