<bf-table [source]="statements" pagination="50">
  <ng-template colRef="number" label="#" let-number>
    {{ number }}
  </ng-template>
  <ng-template colRef="duration" label="Statement period" let-duration>
    {{ duration.from | date: 'dd/MM/yyyy' }} -  {{ duration.to | date: 'dd/MM/yyyy' }}
  </ng-template>
  <ng-template colRef="payments" label="Amount Due" let-payments>
    <price-per-currency 
      *ngIf="payments.rightholder as payment else noPayment" 
      [price]="payment.price | formatPair : payment.currency">
    </price-per-currency>
  </ng-template>
  <ng-template colRef="payments" label="Amount Paid" let-payments>
    <price-per-currency 
      *ngIf="payments.rightholder?.status === 'received' else noPayment"
      [price]="payments.rightholder.price | formatPair : payments.rightholder.currency">
    </price-per-currency>
  </ng-template>
  <ng-template colRef="payments" label="Payment Date" let-payments>
    <ng-container *ngIf="payments.rightholder?.status === 'received'">
      {{ payments.rightholder.date | date: 'dd/MM/yyyy' }}
    </ng-container>
  </ng-template>
  <ng-template colRef="status" label="Reported" let-status sort>
    <bf-tag [ngClass]="status === 'draft'? 'active' : ''">{{ status | toLabel: 'statementStatus' }}</bf-tag>
  </ng-template>
  <ng-template colRef="" label="Actions" let-statement sticky>
    <ng-container *ngIf="statement.status === 'draft'">
      <a mat-icon-button [routerLink]="['..', 'statement', statement.id, 'notify']">
        <mat-icon svgIcon="notifications" matTooltip="Notify Right Holder"></mat-icon>
      </a>
      <a mat-icon-button [routerLink]="['..', 'statement', statement.id, 'edit']">
        <mat-icon svgIcon="edit" matTooltip="Edit Statement"></mat-icon>
      </a>
    </ng-container>
    <ng-container *ngIf="statement.status === 'reported'">
      <button mat-icon-button target="_blank" >
        <mat-icon svgIcon="cloud_download" matTooltip="Download Statement"></mat-icon>
      </button>
      <a mat-icon-button  target="_blank" [routerLink]="['..', 'statement', statement.id]">
        <mat-icon svgIcon="visibility" matTooltip="View Statement"></mat-icon>
      </a>
    </ng-container>
  </ng-template>
</bf-table>
<ng-template #noPayment>
  <price-per-currency [price]="0 | formatPair"></price-per-currency>
</ng-template>