<div *ngIf="isVisible">
  <button class="name" mat-button (click)="handleSelect.emit(vertical.id)">{{vertical.name}}</button>

  <ng-container *ngFor="let member of vertical.members; let isFirst = first; let isLast = last; let index = index">
    <ng-container *ngIf="isFirst; else level">
      <waterfall-graph-right
        hideAmount
        [right]="member"
        [selected]="selected === member.id || selected === '*'"
        (handleSelect)="select(member.id)"
        monetizationLabel='Revenue'
      ></waterfall-graph-right>
    </ng-container>
    <ng-template #level>
      <waterfall-graph-level
        hideAmount
        [right]="member"
        (handleSelect)="select(member.id)"
        [selected]="selected === member.id || selected === '*'"
      ></waterfall-graph-level>
    </ng-template>
    <svg *ngIf="!isLast" width="240" height="32" viewBox="0 0 240 32">
      <path stroke-width="2" stroke="#feb90f" fill="none" d="M 120 0 L 120 30 L 112 22 M 120 30 L 128 22"></path>
    </svg>
  </ng-container>

  <price-per-currency class="amount" [price]="amount$ | async | formatPair" default="0â‚¬"></price-per-currency>

  <ng-container *ngIf="selected === '*' && canUpdate">
    <button mat-mini-fab color="primary" class="right" matTooltip="Add new Receipt Share" (click)="handleAddSibling($event)">
      <mat-icon svgIcon="add"></mat-icon>
    </button>
    <button *ngIf="vertical | canAddChild" mat-mini-fab color="primary" class="bottom" matTooltip="Add new Receipt Share" (click)="handleAddChild($event)">
      <mat-icon svgIcon="add"></mat-icon>
    </button>
  </ng-container>
</div>