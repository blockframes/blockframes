<main>
  <g6-graph autoFit *rxIf="data$; let data" (click)="unselect()">
    <ng-container *rxFor="let node of data.nodes; trackBy: trackBy">
      <g6-node [config]="node" (click)="select($event)"></g6-node>
    </ng-container>
    <ng-container *rxFor="let edge of data.edges; trackBy: trackBy">
      <g6-edge [config]="edge" (click)="select($event)"></g6-edge>
    </ng-container>
    <ng-container *rxFor="let combo of data.combos; trackBy: trackBy">
      <g6-combo [config]="combo" (click)="select($event)"></g6-combo>
    </ng-container>
  </g6-graph>
  <aside *ngIf="!hideDetails">
    <ng-container *ngIf="right">
      <h4>
        <span>{{ getRightholderName(right.orgId) }}</span>
        <button mat-icon-button (click)="orgDetails(right.orgId)">
          <mat-icon svgIcon="search"></mat-icon>
        </button>
      </h4>
      <p>
        <strong>Right Id:</strong> {{ right.id }}<br>
        <strong>Right Revenu:</strong> {{ right.revenu | currency }}<br>
        <strong>Right Turnover:</strong> {{ right.turnover | currency }}<br>
        <strong>Right Percent:</strong> {{ right.percent | percent: '1.0-2' }}<br>
      </p>
    </ng-container>
    <ng-container *ngIf="transfer">
      <h4>{{ transfer.from }} -> {{ transfer.to }}</h4>
      <p>Total: {{ transfer.amount | currency }}</p>
      <ul>
        <li *rxFor="let value of transfer.history">{{ value.amount| currency }}</li>
      </ul>
    </ng-container>
    <ng-container *ngIf="org">
      <h4>{{ getRightholderName(org.id) }}</h4>
      <p>
        <strong>Org Revenu:</strong> {{ org.revenu | currency }}<br>
        <strong>Org Turnover:</strong> {{ org.turnover | currency }}<br>
        <strong>Org Investment:</strong> {{ org.investment | currency }}<br>
        <strong>Org Expense:</strong> {{ org.expense | currency }}<br>
        <strong>Org Bonus:</strong> {{ org.bonus | currency }}
      </p>
    </ng-container>
  </aside>
</main>
<footer>
  <input type="range" min="0" [max]="history.length - 1" [formControl]="control">
</footer>