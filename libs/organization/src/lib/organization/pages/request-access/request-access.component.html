<button app-logo (click)="logout()"></button>

<mat-card fxLayout="column" fxLayoutAlign="center center">
  <ng-container *ngIf="step$ | async as step">

    <ng-container *ngIf="step === 'initial'">
      <img asset="wait.svg"/>
      <h1>Looks like you don't have access to {{ appName[currentApp] }}... yet!</h1>
      <p class="mat-body-2">
        Your email address is already associated with an existing user account of <ng-container *ngFor="let app of (orgExistingAccess$ | async); let isLast = last">{{ appName[app]}}{{ !isLast ? ' and ': ''}}</ng-container>. To access {{appName[currentApp]}}, please request access and wait for our team's approval.
      </p>
      <button mat-flat-button color="primary" (click)="joinOptions()" [disabled]="disabledRequest">Join {{ appName[currentApp] }}</button>
      <button mat-button color="primary" (click)="logout()">Sign up with another email</button>
    </ng-container>

    <ng-container *ngIf="step === 'request'">
      <h1>What access are your looking for ?</h1>
      <p class="mat-body-1">
        To access {{ appName[currentApp] }}, please select a "role". It will determine the features you can acccess once you've joined the platform.
      </p>
      <p class="mat-body-2">N.B.: All members from your company will be granted the same access.</p>

      <article fxLayout="row" fxLayoutAlign="space-between center" fxLayout.lt-md="column">
        <div fxLayout="row">
          <p>Choose your role * :</p>
          <mat-icon svgIcon="info"
            matTooltip="Depending on your role, you might have access to different features of the platform."></mat-icon>
        </div>
        <mat-button-toggle-group [ngClass]="{ disabled: false }" name="appAccess" [formControl]="formControl">
          <mat-button-toggle value="marketplace">{{ roles[currentApp].marketplace }}</mat-button-toggle>
          <mat-button-toggle value="dashboard">{{ roles[currentApp].dashboard }}</mat-button-toggle>
        </mat-button-toggle-group>
      </article>
      <button mat-flat-button color="primary" (click)="requestAccess()" [disabled]="disabledRequest">Request Access</button>
      <button mat-button color="primary" (click)="logout()">Cancel</button>
    </ng-container>

  </ng-container>
</mat-card>
