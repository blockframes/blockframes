<tunnel-page>
  <ng-container tunnel-form>

    <section id="currency">
      <h3>Currency</h3>
      <p class="mat-body-2 ">Please choose the currency that will be applied to your project</p>
      
      <static-select class="currency" scope="movieCurrencies" [only]="['USD', 'EUR', 'GBP']" [control]="form.get('currency')" required>
        <mat-label>Currency</mat-label>
        <ng-template let-currency>
          <mat-icon [svgIcon]="currency" matPrefix></mat-icon>
          <span>{{ currency | toLabel: 'movieCurrencies' }}</span>
          <mat-error *ngIf="form.hasError('required', 'currency')">Please provide a currency.</mat-error>
        </ng-template>
      </static-select>
    </section>
    
    <mat-divider></mat-divider>

    <section id="budget" fxLayout="column">
      <h3>Budget</h3>

      <mat-form-field appearance="outline">
        <mat-label>Producer's Fees</mat-label>
        <input matInput type="number" [formControl]="budget.get('producerFees')" required />
        <mat-icon matSuffix [svgIcon]="form.getCurrency()"></mat-icon>
        <mat-error *ngIf="budget.hasError('required', 'producerFees')">Please provide the producer's fees.</mat-error>

      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Cast Cost</mat-label>
        <input matInput type="number" [formControl]="budget.get('castCost')" required />
        <mat-icon matSuffix [svgIcon]="form.getCurrency()"></mat-icon>
        <mat-error *ngIf="budget.hasError('required', 'castCost')">Please provide the Cast cost.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Shoot Cost</mat-label>
        <input matInput type="number" [formControl]="budget.get('shootCost')" required />
        <mat-icon matSuffix [svgIcon]="form.getCurrency()"></mat-icon>
        <mat-error *ngIf="budget.hasError('required', 'shootCost')">Please provide the Shoot cost.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Post-Production Cost</mat-label>
        <input matInput type="number" [formControl]="budget.get('postProdCost')" required />
        <mat-icon matSuffix [svgIcon]="form.getCurrency()"></mat-icon>
        <mat-error *ngIf="budget.hasError('required', 'postProdCost')">Please provide the Post-Production cost.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Other Charges</mat-label>
        <input matInput type="number" [formControl]="budget.get('others')" />
        <mat-hint>Other charges include insurance, research screenings, general expense...</mat-hint>
        <mat-icon matSuffix [svgIcon]="form.getCurrency()"></mat-icon>
      </mat-form-field>
  
      <p class="mat-body-2 total">
        <b>
          Your total estimated budget is :
          {{ budget.value | budget | currency: form.getCurrency() : 'symbol' : '1.0-0' }}
        </b>
      </p>
    </section>

    <mat-divider></mat-divider>

    <section id="file" >
      <h3 fxLayout fxLayoutAlign="start center">
        <mat-icon svgIcon="upload"></mat-icon>
        <span>Upload document</span>
      </h3>
      <p>
        Please <b>upload your total estimated budget</b>
        <br/>
        This upload is optional, but this information might be very helpful to your potential investors.
      </p>
      <file-upload [form]="form.get('files').get('budget')" [storagePath]="storagePath" accept="['.pdf']" [types]="['application/pdf']">
        <h3 type>Upload Files</h3>
        <p class="mat-caption" format>Accepted Formats: .pdf</p>
      </file-upload>
      <span class="mat-caption">Upload a complete document.</span>
    </section>
  </ng-container>
</tunnel-page>