<div class="bg-navigation" [ngClass]="{ hide: !showNavigation }" (click)="toggleNavigation()"></div>
<aside [ngClass]="{ opened: showNavigation }">
  <mat-toolbar>
    <a app-logo routerLink="."></a>
    <a app-logo-icon routerLink="."></a>
    <button test-id="menu" mat-icon-button (click)="toggleNavigation()">
      <mat-icon svgIcon="arrow_back"></mat-icon>
    </button>
  </mat-toolbar>
  <ng-content select="marketplace-aside"></ng-content>
</aside>

<div id="marketplace-content" [appContainer]="app" (toggle)="toggleNavigation()">
  <!-- TOOLBAR -->
  <app-bar #app>
    <header>
      <button test-id="menu" mat-icon-button (click)="toggleNavigation()">
        <mat-icon svgIcon="menu"></mat-icon>
      </button>
      <ng-content select="header"></ng-content>
      <a test-id="heart-icon" mat-icon-button routerLink="wishlist" matTooltip="Wishlist">
        <mat-icon svgIcon="favorite"
          [matBadge]="wishlistCount$ | async"
          [matBadgeHidden]="(wishlistCount$ | async) === 0"
          matBadgeColor="accent"
          matBadgeSize="small">
        </mat-icon>
      </a>
      <div>
        <mat-divider vertical></mat-divider>
        <!-- Invitations -->
        <a mat-icon-button routerLink="invitations" test-id="invitations-link" matTooltip="Invitations">
          <ng-container *ngIf="invitationCount$ | async as count; else noInvitation">
            <mat-icon svgIcon="invitation" [matBadge]="count" matBadgeColor="accent" matBadgeSize="small"></mat-icon>
          </ng-container>
          <ng-template #noInvitation>
            <mat-icon svgIcon="invitation"></mat-icon>
          </ng-template>
        </a>
        <!-- Notifications -->
        <a mat-icon-button routerLink="notifications" test-id="notifications-link" matTooltip="Notifications">
          <ng-container *ngIf="notificationCount$ | async as count; else noNotification">
            <mat-icon svgIcon="notifications" [matBadge]="count" matBadgeColor="accent" matBadgeSize="small">
            </mat-icon>
          </ng-container>
          <ng-template #noNotification>
            <mat-icon svgIcon="notifications"></mat-icon>
          </ng-template>
        </a>
        <auth-widget></auth-widget>
      </div>
    </header>
  </app-bar>

  <!-- CONTENT -->
  <main cdkScrollable>
    <div class="page" [@routeAnimation]="animationOutlet(outlet)">
      <router-outlet #outlet="outlet" (activate)="scrollToTop()"></router-outlet>
    </div>
    <bf-footer></bf-footer>
  </main>
</div>
