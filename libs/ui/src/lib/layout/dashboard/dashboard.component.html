<div class="bg-navigation" [ngClass]="{ hide: !showNavigation }" (click)="toggleNavigation()"></div>
<aside [ngClass]="{ opened: showNavigation }">
  <mat-toolbar>
    <a app-logo routerLink="."></a>
    <a app-logo-icon routerLink="."></a>
    <button test-id="menu" mat-icon-button (click)="toggleNavigation()">
      <mat-icon svgIcon="arrow_back"></mat-icon>
    </button>
  </mat-toolbar>
  <ng-content></ng-content>
</aside>

<div id="dashboard-content" [appContainer]="app" (toggle)="toggleNavigation()">
  <!-- TOOLBAR -->
  <app-bar #app>
    <header>
      <button mat-icon-button test-id="menu" (click)="toggleNavigation()">
        <mat-icon svgIcon="menu"></mat-icon>
      </button>
      <div>
        <ng-container *ngIf="currentApp === 'festival' || currentApp === 'catalog'">
          <a mat-button class="link-to-app" color="primary" [href]="appBridge[currentApp].link" target="_blank">
            <mat-icon [svgIcon]="appBridge[currentApp].logo"></mat-icon>
            <span>{{appBridge[currentApp].text}}</span>
          </a>
        </ng-container>
        <mat-divider vertical></mat-divider>
        <!-- Invitations -->
        <a mat-icon-button routerLink="invitations" test-id="invitations-link">
          <ng-container *ngIf="invitationCount$ | async as count; else noInvitation">
            <mat-icon svgIcon="invitation" [matBadge]="count" matBadgeColor="accent" matBadgeSize="small"></mat-icon>
          </ng-container>
          <ng-template #noInvitation>
            <mat-icon svgIcon="invitation"></mat-icon>
          </ng-template>
        </a>
        <!-- Notifications -->
        <a mat-icon-button routerLink="notifications" test-id="notifications-link">
          <ng-container *ngIf="notificationCount$ | async as count; else noNotification">
            <mat-icon svgIcon="notifications" [matBadge]="count" matBadgeColor="accent" matBadgeSize="small"></mat-icon>
          </ng-container>
          <ng-template #noNotification>
            <mat-icon svgIcon="notifications"></mat-icon>
          </ng-template>
        </a>
        <auth-widget></auth-widget>
      </div>
    </header>
  </app-bar>

  <!-- CONTENT -->
  <main cdkScrollable>
    <div>
      <router-outlet></router-outlet>
    </div>
    <bf-footer></bf-footer>
  </main>
</div>