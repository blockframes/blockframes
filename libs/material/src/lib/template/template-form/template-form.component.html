<mat-sidenav-container>
  <!-- Sidenav -->
  <mat-sidenav [opened]="true" mode="side">
    <material-list *ngIf="(template$ | async) as template" [template]="template"></material-list>
  </mat-sidenav>
  <!-- Content -->
  <mat-sidenav-content>
    <button (click)="addForm('')" color="primary" mat-icon-button matRipple>
      <mat-icon class="icon-add">add_circle</mat-icon>
      Add new material
    </button>
    <div *ngIf="(form$ | async) as form">
      <material-form *ngIf="form.category === ''" (material)="addMaterial($event)"></material-form>
    </div>
    <mat-card class="mat-elevation-z0" *ngFor="let category of (template$ | async | keyvalue)" [id]="category.key">
      <mat-card-title class="container" fxLayout="row" fxLayoutAlign="start center">
        <h4 fxFlex="60">Category : {{ category.key }}</h4>
        <button fxFlex="40" (click)="addForm(category.key)" color="primary" mat-icon-button matRipple>
          <mat-icon class="icon-add">add_circle</mat-icon>
          Add new material with this category
        </button>
      </mat-card-title>
      <mat-card-content class="mat-elevation-z8">
        <div cdkDrag *ngFor="let material of category.value">
          <material-item [material]="material" (isDeleted)="deleteMaterial(material)"></material-item>
        </div>
        <div *ngIf="(form$ | async) as form">
          <material-form
            *ngIf="form.category === category.key"
            (material)="addMaterial($event)"
          ></material-form>
        </div>
      </mat-card-content>
    </mat-card>
  </mat-sidenav-content>
</mat-sidenav-container>
