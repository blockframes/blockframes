<mat-sidenav-container>
  <!-- Sidenav -->
  <mat-sidenav [opened]="true" mode="side">
    <material-list *ngIf="(template$ | async) as template" [template]="template"></material-list>
    <button
      *ngIf="templateActive$ | async as templateActive"
      class="delete-template mat-elevation-z0"
      mat-raised-button (click)="deleteTemplate(templateActive.id, templateActive.name)">
        Delete template
        <mat-icon class="icon">delete</mat-icon>
    </button>
  </mat-sidenav>
  <!-- Content -->
  <mat-sidenav-content>
    <section>
    <h3 *ngIf="templateActive$ | async as templateActive">{{ templateActive.name }}</h3>
    <div *ngIf="(form$ | async) as form">
      <material-form *ngIf="form.category === ''" (material)="addMaterial($event)"></material-form>
    </div>
    <article *ngFor="let category of (template$ | async | keyvalue)" [id]="category.key">
      <div class="container" fxLayout="row" fxLayoutAlign="space-between center">
        <h4>{{ category.key }}</h4>
        <button class="create-material mat-elevation-z0" (click)="addForm(category.key)" mat-raised-button>
          Add a material
          <mat-icon class="icon">add</mat-icon>
        </button>
      </div>
      <div>
        <div cdkDrag *ngFor="let material of category.value">
          <material-item [material]="material" (isDeleted)="deleteMaterial(material)"></material-item>
        </div>
        <div *ngIf="(form$ | async) as form">
          <material-form
            *ngIf="form.category === category.key"
            (material)="addMaterial($event)"
          ></material-form>
        </div>
      </div>
    </article>
  </section>
  </mat-sidenav-content>
</mat-sidenav-container>
