<mat-card
  [ngClass]="{ 'materials-disabled': !!disableMaterial }"
  class="materials-block mat-elevation-z0"
  fxLayout="row"
  fxLayoutGap="20px"
>
  <mat-checkbox
    fxLayoutAlign="center center"
    color="primary"
    [(ngModel)]="isChecked"
    [disabled]="!!disableMaterial"
    (click)="!disableMaterial && selectMaterial()"
  >
  </mat-checkbox>
  <article fxFlex fxLayout="row" fxLayoutAlign="center start">
    <div class="material" fxLayout="column">
      <h4 mat-line>{{ material.value }}</h4>
      <mat-expansion-panel
        [ngClass]="{ 'expansion-panel-disabled': !!disableMaterial }"
        [expanded]="isOpen"
        class="mat-elevation-z0 panel"
      >
        <p mat-line class="description-text">{{ material.description }}</p>
      </mat-expansion-panel>
      <div fxLayout="row" fxLayoutAlign="start center" class="buttons">
        <button
          [ngClass]="{ 'toggle-disabled': !!disableMaterial }"
          class="toggle mat-elevation-z0"
          mat-raised-button
          (click)="!disableMaterial && panelToggle()"
        >
          {{ panelButtonLabel }}
        </button>
        <span class="divider">|</span>
        <button
          [ngClass]="{ 'disable-disabled': !!disableMaterial }"
          class="disable mat-elevation-z0"
          mat-raised-button
          (click)="disableToggle()"
        >
          {{ disableButtonLabel }}
        </button>
      </div>
    </div>
    <div class="informations" fxLayout="row" fxLayoutAlign="space-around none">
      <ng-container *ngIf="!disableMaterial && !!material.step; else noStep">
        <div class="step">
          <h5>Step</h5>
          <p class="step-text">{{ material.step.name }}</p>
        </div>
      </ng-container>
      <ng-template #noStep>
        <div class="step"></div>
      </ng-template>
      <div class="state" fxLayout="column">
        <h5>State</h5>
        <mat-icon
          *ngIf="!!material.state"
          class="icons"
          matTooltip="{{ material.state.toUpperCase() }}"
          svgIcon="{{ material.state }}">
        </mat-icon>
        <a *ngIf="material.state === 'available'" href="assets/apps/delivery.svg" download>
          <mat-icon color="primary" class="download-icon">cloud_download</mat-icon>
        </a>
      </div>
      <ng-container *ngIf="!disableMaterial" [ngSwitch]="material.state">
        <div *ngSwitchCase="'delivered'" class="time">
          <h5>Accepted in</h5>
          <p class="time-text">45 days</p>
        </div>
        <div *ngSwitchCase="'refused'" class="time">
          <h5>Refused in</h5>
          <p class="time-text">30 days</p>
        </div>
        <div *ngSwitchDefault class="time">
        </div>
      </ng-container>
      <div class="payment">
        <h5>Payment</h5>
        <mat-icon *ngIf="material.state === 'available'; else notPayed" class="icons" svgIcon="{{ paymentIcons[0] }}"></mat-icon>
        <ng-template #notPayed>
            <mat-icon class="icons" svgIcon="{{ paymentIcons[1] }}"></mat-icon>
        </ng-template>

      </div>
    </div>
  </article>
</mat-card>
