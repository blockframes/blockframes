<table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z0">
  <!-- Stakeholders Column -->
  <!--
    Only display other stakeholders. If we are the only stakeholder,
    we get a placeholder with "No signers yet !" label
  -->
  <ng-container matColumnDef="signers">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Signers</th>
    <td mat-cell *matCellDef="let delivery">
      <span fxLayout="row" fxLayoutAlign="start center">
        <ng-container *ngFor="let stakeholder of delivery.stakeholders">
          <ng-container *ngIf="stakeholder.id !== userOrganization.id">
            <!--TODO use <avatar-list> component from ui when orgs will have avatar property => ISSUE#746-->
            <!--TODO find a way to sort signers by stakeholder name => ISSUE#750 -->
            <img
              [src]="stakeholder.organization.logo"
              alt="Organization logo"/>
            <b>{{ stakeholder.organization.name }}</b>
          </ng-container>
        </ng-container>
        <ng-container *ngIf="delivery.stakeholders.length === 1">
          <img
            [src]="placeholderLogo"
            alt="Stakeholder Picture"/>
          <b>(No signers yet !)</b>
        </ng-container>
      </span>
    </td>
  </ng-container>

  <!-- State Column -->
  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
    <td mat-cell *matCellDef="let delivery">{{ delivery.status }}</td>
  </ng-container>

  <!-- MG Current Deadline Column -->
  <ng-container matColumnDef="mgCurrentDeadline">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>MG Current Deadline</th>
    <td mat-cell *matCellDef="let delivery">{{ delivery.mgDeadlines[delivery.mgCurrentDeadline].label }}</td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <!-- Click on a row to navigate to the delivery edition page -->
  <tr mat-row *matRowDef="let row; columns: displayedColumns" [routerLink]="['../', row.id, 'list']"></tr>
</table>
