<editable-sidenav (closed)="opened = false" [opened]="opened" (saved)="update()" *ngIf="(delivery$ | async) as delivery">
  <!-- Content -->
  <ng-container content>
    <article *ngIf="(movie$ | async) as movie" fxLayout="row" fxLayoutAlign="none center">
      <h2>{{ movie.main.title.original }}</h2>
      <mat-divider fxFlex></mat-divider>
      <button mat-icon-button matTooltip="Save as a template" (click)="saveAsTemplate()">
        <mat-icon svgIcon="template"></mat-icon>
      </button>
      <a
        mat-icon-button
        matTooltip="Export delivery in a .pdf file"
        [href]="pdfLink"
        target="_blank">
        <mat-icon svgIcon="pdf"></mat-icon>
      </a>
      <button
        *ngIf="delivery.mustBeSigned"
        mat-icon-button
        matTooltip="Sign delivery"
        (click)="signDelivery()">
        <mat-icon svgIcon="signature"></mat-icon>
      </button>
      <button mat-icon-button matTooltip="Delete delivery" (click)="openDeleteDelivery()">
        <mat-icon svgIcon="delete"></mat-icon>
      </button>
      <a mat-button color="primary" (click)="addMaterial()">
        <mat-icon>add</mat-icon> <span>Add material</span>
      </a>
    </article>
    <delivery-material-list
      [materials]="materials$ | async"
      (editing)="openSidenav($event)">
    </delivery-material-list>
  </ng-container>
  <!-- Sidenav -->
  <ng-container *ngIf="(materialFormGroup$ | async) as materialFormGroup" sidenav>
    <delivery-material-form
      [formGroup]="materialFormGroup"
      [delivery]="delivery$ | async"
      (delete)="openDeleteMaterial($event)"
    ></delivery-material-form>
  </ng-container>
</editable-sidenav>
