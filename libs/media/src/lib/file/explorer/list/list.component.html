<section fxLayout="column" fxLayoutGap="24px">
  <!-- Image -->
  <ng-container *ngIf="dir.type === 'image'">
    <image-uploader [ratio]="dir.ratio" [storagePath]="dir.storagePath" [form]="dir.form">
      <h3 title>{{ dir.name }}</h3>
    </image-uploader>
  </ng-container>

  <!-- File -->
  <bf-form-list [form]="dir.form" listPosition="bottom" keepFormOpen reverseList>
    <ng-template itemRef let-item>
      <button mat-list-icon (click)="openView(item, $event)">
        <mat-icon [svgIcon]="item.storagePath | filename | fileTypeImage: 'icon'"></mat-icon>
      </button>
      <p mat-line>{{ item.type | titlecase }} - {{ (item.storagePath | fileName) }}</p>
      <button mat-icon-button (click)="downloadFile(item, $event)">
        <mat-icon svgIcon="cloud_download"></mat-icon>
      </button>
    </ng-template>
    <ng-template formView let-activeForm let-index="index">
      <file-new-uploader
        [form]="activeForm.get('storagePath')"
        [meta]="[...dir.meta, index]"
        [accept]="dir.accept"
      >
        <h3 title>Upload File</h3>
      </file-new-uploader>

      <ng-template saveButtonText>Save</ng-template>
      <ng-template addButtonText>Add</ng-template>
    </ng-template>
  </bf-form-list>
</section>
