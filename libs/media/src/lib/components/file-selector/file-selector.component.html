

<header fxLayout="row">
  <h2 fxFlex="0 1">Choose your files</h2>
  <button mat-icon-button fxFlex (click)="closeDialog()"><mat-icon svgIcon="close"></mat-icon></button>
</header>

<mat-divider></mat-divider>

<section fxLayout="row">
  <mat-tab-group>
    <mat-tab label="Organization Files">
      <mat-list>
        <ng-container *ngIf="orgFiles.length; else noOrgFiles">
          <mat-list-item *ngFor="let file of orgFiles">
            <mat-icon mat-list-icon [svgIcon]="file.path | fileTypeImage : 'icon'"></mat-icon>
            <div mat-line [matTooltip]="file.path | fileName" (click)="previewFile(file.path)" class="clickable">{{ file.path | fileFolder }} - {{file.path | fileName}}</div>
            <button mat-icon-button (click)="toggleSelect(file.path)">
              <mat-icon *ngIf="file.isSelected" svgIcon="check" color="primary"></mat-icon>
              <mat-icon *ngIf="!file.isSelected" svgIcon="add"></mat-icon>
            </button>
          </mat-list-item>
        </ng-container>
        <ng-template #noOrgFiles>
          <mat-list-item>No Files</mat-list-item>
        </ng-template>
      </mat-list>
    </mat-tab>

    <mat-tab label="Titles Files">

      <mat-expansion-panel *ngFor="let movie of movies">

        <mat-expansion-panel-header>
          <mat-panel-title fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
            <mat-icon svgIcon="folder"></mat-icon>
            <div fxFlex fxLayout="column">
              <h5>{{movie.title.international}}</h5>
              <p class="mat-caption" i18n>{{moviesFiles[movie.id].length}} {moviesFiles[movie.id].length, plural, =0 {file} =1 {file} other {files}}</p>
            </div>
          </mat-panel-title>
        </mat-expansion-panel-header>

        <mat-divider></mat-divider>
        <mat-list>
          <ng-container *ngIf="moviesFiles[movie.id].length; else noMovieFiles">
            <mat-list-item *ngFor="let file of moviesFiles[movie.id]">
              <mat-icon mat-list-icon [svgIcon]="file.path | fileTypeImage : 'icon'"></mat-icon>
              <div mat-line [matTooltip]="file.path | fileName" (click)="previewFile(file.path)" class="clickable">{{ file.path | fileFolder }} - {{file.path | fileName}}</div>
              <button mat-icon-button (click)="toggleSelect(file.path)">
                <mat-icon *ngIf="file.isSelected" svgIcon="check" color="primary"></mat-icon>
                <mat-icon *ngIf="!file.isSelected" svgIcon="add"></mat-icon>
              </button>
            </mat-list-item>
          </ng-container>
          <ng-template #noMovieFiles>
            <mat-list-item>No Files</mat-list-item>
          </ng-template>
        </mat-list>
        <mat-divider></mat-divider>

      </mat-expansion-panel>

    </mat-tab>
  </mat-tab-group>
  <aside fxLayout="column">
    <h4>Selected Files ({{selectedFiles.length}})</h4>
    <mat-list fxFlex>
      <mat-list-item *ngFor="let file of selectedFiles">
        <mat-icon mat-list-icon [svgIcon]="file | fileTypeImage : 'icon'"></mat-icon>
        <div mat-line [matTooltip]="file | fileName">{{file | fileName}}</div>
        <button mat-icon-button (click)="toggleSelect(file)"><mat-icon svgIcon="cross"></mat-icon></button>
      </mat-list-item>
    </mat-list>
    <button mat-raised-button color="primary" (click)="closeDialog()" [disabled]="!selectedFiles.length">Add Files</button>
  </aside>
</section>
