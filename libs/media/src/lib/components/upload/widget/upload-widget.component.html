<mat-accordion *ngIf="(items$ | async).length as itemCount" class="mat-card">
  <mat-expansion-panel expanded>
    <mat-expansion-panel-header i18n>Uploading {{ itemCount }} item{ itemCount,
      plural, =1 {} other {s} }
    </mat-expansion-panel-header>

    <div fxLayout="column" fxLayoutAlign="start start" fxLayoutGap="24px" class="content">

      <mat-divider></mat-divider>
      <caption class="mat-caption sub-header">Weâ€™re uploading your files to our servers. That can take a while,
        thank you for your patience! You can continue using the platform</caption>

      <div fxLayout="column-reverse" fxLayoutGap="24px">
        <ng-container *ngFor="let item of items$ | async">
          <ng-container [ngSwitch]="item.status">

            <div fxLayout="row" fxLayoutGap="8px">
              <img [src]="getFileType(item.id)">

              <div fxLayout="column" fxLayoutAlign="start start">
                <caption class="caption">{{item.id | maxLength: 25}}</caption>
                <mat-progress-bar [value]="item.progress" *ngIf="item.status !== 'canceled'"></mat-progress-bar>

                <!-- Finished -->
                <ng-template ngSwitchCase="succeeded">
                  <caption class="mat-caption succeeded"><em>Completed</em></caption>
                </ng-template>

                <!-- Paused -->
                <ng-template ngSwitchCase="paused">
                  <caption class="mat-caption"><em>Paused</em></caption>
                </ng-template>

                <!-- Processing -->
                <ng-template ngSwitchCase="uploading">
                  <caption class="mat-caption"><em>Uploading</em></caption>
                </ng-template>

                <!-- Error -->
                <ng-template ngSwitchCase="canceled">
                  <caption class="mat-caption canceled"><em>A problem has occurred!</em></caption>
                </ng-template>
              </div>

              <!-- Processing -->
              <ng-template ngSwitchCase="uploading">
                <button mat-icon-button (click)="pause(item.id)">
                  <mat-icon svgIcon="pause_circle"></mat-icon>
                </button>
                <button mat-icon-button (click)="cancel(item.id)">
                  <mat-icon svgIcon="cross_circle"></mat-icon>
                </button>
              </ng-template>

              <!-- Error -->
              <ng-template ngSwitchCase="canceled">
                <button mat-icon-button (click)="clear(item.id)">
                  <mat-icon svgIcon="cross_circle"></mat-icon>
                </button>
              </ng-template>

              <!-- Paused -->
              <ng-template ngSwitchCase="paused">
                <button mat-icon-button (click)="resume(item.id)">
                  <mat-icon svgIcon="play_circle"></mat-icon>
                </button>
                <button mat-icon-button (click)="cancel(item.id)">
                  <mat-icon svgIcon="cross_circle"></mat-icon>
                </button>
              </ng-template>

              <!-- Finished -->
              <ng-template ngSwitchCase="succeeded">
                <button mat-icon-button (click)="clear(item.id)">
                  <mat-icon svgIcon="check_circle"></mat-icon>
                </button>
              </ng-template>

            </div>
          </ng-container>
        </ng-container>
      </div>
    </div>
  </mat-expansion-panel>
</mat-accordion>