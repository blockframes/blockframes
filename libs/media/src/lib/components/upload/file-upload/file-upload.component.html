<ng-container [ngSwitch]="state">
  <!-- Waiting -->
  <section *ngSwitchCase="'waiting'">
    <label class="upload-button-container">
      <button mat-icon-button aria-label="file upload button" (click)="fileExplorer.click()">
        <bf-img asset="add_files.webp" alt="upload image"></bf-img>
      </button>
      <input #fileExplorer [accept]="accept" type="file" (change)="upload($event.target.files)" />
    </label>
    <ng-content select="[type]"></ng-content>
    <ng-content select="[format]"></ng-content>
    <p class="mat-caption">Drag and drop a file here or
      <a (click)="fileExplorer.click()">browse</a>
    </p>
  </section>

  <!-- Hovering -->
  <section *ngSwitchCase="'hovering'">
    <bf-img asset="add_files.webp" alt="upload image" class="picture-hover"></bf-img>
  </section>

  <!-- Uploading -->
  <section *ngSwitchCase="'uploading'">
    <div class="progress" *ngIf="(percentage | async) as pct">
      <mat-progress-bar mode="determinate" [value]="pct"></mat-progress-bar>
      <p class="mat-caption">{{ pct | number: '1.0-0' }} %</p>
    </div>

    <button mat-button (click)="task.cancel()">Cancel</button>
  </section>

  <!-- Success -->
  <section *ngSwitchCase="'success'">
    <h3>Your file is successfully uploaded</h3>
    <ng-container *ngIf="downloadURL as url">
      <div fxLayout="column" fxLayoutGap="16px" fxLayoutAlign="start center">
        <a [href]="url" target="_blank" rel="noopener" class="mat-body-2">
          You can download it here.
        </a>
        <button mat-mini-fab color="warn">
          <mat-icon (click)="delete()" svgIcon="trash" matTooltip="Delete current file"></mat-icon>
        </button>
      </div>
    </ng-container>
  </section>
</ng-container>
