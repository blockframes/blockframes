<ng-template pageBar>
  <header fxLayout fxLayoutAlign="space-between center">
    <a mat-icon-button routerLink="../..">
      <mat-icon svgIcon="arrow_back"></mat-icon>
    </a>
    <div fxLayout fxLayoutAlign="end center">
      <ng-container *ngIf="form.dirty">
        <button @scaleIn type="submit" mat-stroked-button color="primary" (click)="save()">Save</button>
      </ng-container>
      <button type="button" mat-button color="warn" (click)="remove()">Delete</button>
    </div>
  </header>
</ng-template>

<form [formGroup]="form">
  <section fxLayout="column" fxLayoutGap="24px">
    <article class="details" fxLayout="column" fxFlex="65">
      <h4>Details</h4>
      <mat-form-field appearance="outline">
        <mat-label>Event Title</mat-label>
        <input matInput formControlName="title" placeholder="Event title" />
      </mat-form-field>
      <div fxLayout fxLayoutAlign="start center" fxLayoutGap="24px">
        <mat-form-field fxFlex appearance="outline">
          <mat-label>Start</mat-label>
          <time-picker formControlName="start"></time-picker>
        </mat-form-field>
    
        <span>to</span>
    
        <mat-form-field fxFlex appearance="outline">
          <mat-label>End</mat-label>
          <time-picker formControlName="end"></time-picker>
        </mat-form-field>
      </div>
      <!-- Meta content -->
      <ng-content></ng-content>
    </article>

    <article class="invitations" fxLayout="column"  fxFlex="35">
      <h4>Invitations</h4>
      
      <algolia-chips-autocomplete
        index="user"
        displayWithPath="email"
        [form]="invitationForm"
        label="Search for a guest"
        placeholder="Enter guest email"
      >
        <ng-template let-user>
          <div class="profile-item" fxLayout fxLayoutAlign="strt center" fxLayoutGap="8px">
            <img [imgRef]="user.avatar.media" placeholderAsset="profil_user.webp" alt="Profile" />
            <span>{{ user | displayName }}</span>
          </div>
        </ng-template>
      </algolia-chips-autocomplete>

      <mat-list>
        <mat-list-item>
          <mat-icon matListIcon svgIcon="group"></mat-icon>
          <span matLine>{{ invitations.length }} guests</span>
        </mat-list-item>
      </mat-list>
      <!-- Here the list of invited persons -->
      <invitation-guest-list [invitations]="invitations"></invitation-guest-list>
    </article>
  </section>
</form>


