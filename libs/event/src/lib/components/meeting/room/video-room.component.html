<ng-container *ngIf="attendees$ | async as attendees" >

  <section class="video" [gdColumns]="attendees.length | roomColumns">
    <meeting-video *ngFor="let attendee of attendees"  [attendee]="attendee"></meeting-video>
  </section>

  <footer *ngIf="(local$ | async) as local">

    <ng-container *ngIf="local.tracks.video as videoTrack">
      <button mat-fab color="primary" (click)="toggleLocalTrack('video')">
        <mat-icon *ngIf="videoTrack.isEnabled" svgIcon="videocam"></mat-icon>
        <mat-icon *ngIf="!videoTrack.isEnabled" svgIcon="videocam_off"></mat-icon>
      </button>
    </ng-container>
    <ng-container *ngIf="!local.tracks.video">
      <!-- We put the tooltip on a parent <span> because tooltip are not displayed on disabled buttons -->
      <span matTooltip="Your browser don't have the permission to access the camera">
        <button mat-fab disabled>
          <mat-icon svgIcon="videocam"></mat-icon>
        </button>
      </span>
    </ng-container>

    <ng-container *ngIf="local.tracks.audio as audioTrack">
      <button mat-fab color="primary" (click)="toggleLocalTrack('audio')">
        <mat-icon *ngIf="audioTrack.isEnabled" svgIcon="unmute"></mat-icon>
        <mat-icon *ngIf="!audioTrack.isEnabled" svgIcon="mute"></mat-icon>
      </button>
    </ng-container>
    <ng-container *ngIf="!local.tracks.audio">
      <!-- We put the tooltip on a parent <span> because tooltip are not displayed on disabled buttons -->
      <span matTooltip="Your browser don't have the permission to access the microphone">
        <button mat-fab disabled>
          <mat-icon svgIcon="unmute"></mat-icon>
        </button>
      </span>
    </ng-container>

    <button mat-fab color="accent" matTooltip="Quit the Meeting" (click)="quitMeeting()">
      <mat-icon svgIcon="call_end"></mat-icon>
    </button>

  </footer>
</ng-container>
