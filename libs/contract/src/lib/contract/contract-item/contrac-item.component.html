
    <ng-container *ngFor="let contract of bucket.contracts; trackBy: trackById; let i = index">
      <ng-container *ngIf="contract.titleId | getTitle | async as title">
        <section class="contract surface" test-id="avails-section">
          <header fxLayout fxLayoutAlign="space-between start">
            <section fxLayout="column">
              <h2>{{ title.title.international }}</h2>
              <article fxLayout fxLayoutGap="12px">
                <img [ref]="title.poster | storageFile: 'movies':'poster':title.id" asset="empty_poster.webp"
                  alt="Movie Illustration" [routerLink]="['/c/o/marketplace/title/', title.id]">
                <div fxLayout="column">
                  <h3>{{ title.directors | displayName }}</h3>
                  <p>{{ title | movieFeature }}</p>
                </div>
              </article>
            </section>
            <ng-template  *ngIf="showPrice" [ngTemplateOutlet]="priceTemplate" [ngTemplateOutletContext]="{contractIndex:i, price:contract.price}"></ng-template>
          </header>
          <bf-table-filter [source]="contract.terms" [columns]="columns" [initialColumns]="initialColumns" showFilter>
            <ng-template colRef="duration" let-duration>
              {{ duration.from | date }} - {{ duration.to | date }}
            </ng-template>
            <ng-template colRef="territories" let-territories>
              <section (click)="_openDetails(territories, 'territories')">
                <p class="ellipsis">
                  {{ territories | toLabel: 'territories' }}
                </p>
              </section>
            </ng-template>
            <ng-template colRef="medias" let-medias>
              {{ medias | toLabel:'medias' }}
            </ng-template>
            <ng-template colRef="exclusive" let-exclusive>
              {{ exclusive ? 'Yes' : 'No' }}
            </ng-template>
            <ng-template  *ngIf="showPriceTemplate" colAction="action" label="Actions" let-termIndex="index">
              <ng-template [ngTemplateOutlet]="colActionsTemplate" [ngTemplateOutletContext]="{termIndex:termIndex, contractIndex:i, titleId:contract.titleId}"></ng-template>
            </ng-template>

          </bf-table-filter>
          <footer fxLayout fxLayoutAlign="space-between">
            <button mat-button (click)="_removeContract(i, title)" test-id="delete-contract">
              Delete all rights for this title
            </button>
            <a mat-flat-button [routerLink]="['../title', title.id, 'avails']" color="primary">
              Add Rights
            </a>
          </footer>
        </section>
      </ng-container>
    </ng-container>
