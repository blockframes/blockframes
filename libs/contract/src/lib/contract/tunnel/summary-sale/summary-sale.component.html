<tunnel-page>
  <h4 title>Summary & Submit</h4>
  <h1 subtitle>Contract Offer Summary</h1>
  <p description class="mat-body-1">
    Please verify that all the information you have entered is correct before submitting you contract offer.
  </p>

  <ng-container tunnel-form>

    <!-- Cntract Details -->
    <mat-card>
      <mat-card-header>
        <mat-card-title>Contract Details</mat-card-title>
        <a mat-icon-button routerLink="../details">
          <mat-icon svgIcon="pencil"></mat-icon>
        </a>
      </mat-card-header>
      <mat-card-content>
        <ul>
          <!-- Party -->
          <h5>Parties</h5>
          <li *ngFor="let licensee of parties.licensee">
            <b>Licensee Name: </b> <missing-control [control]="licensee" link="../details"></missing-control>
          </li>
          <li *ngFor="let licensor of parties.licensor">
            <b>Licensor Name: </b> <missing-control [control]="licensor" link="../details"></missing-control>
          </li>
          <!-- Terms -->
          <h5>Terms</h5>
          <li>
            <b>Terms: </b>
            From
            <missing-control [control]="terms.start" link="../details">
              <ng-template let-start>{{ start | date }}</ng-template>
            </missing-control>
            to
            <missing-control [control]="terms.end" link="../details">
              <ng-template let-end>{{ end | date }}</ng-template>
            </missing-control>
            for
            <missing-control [control]="terms.floatingDuration.get('duration')" link="../details"></missing-control>
            <missing-control [control]="terms.floatingDuration.get('unit')" link="../details"></missing-control>
            starting from
            <missing-control [control]="terms.floatingStart" link="../details"></missing-control>.
          </li>
          <!-- Title Selection & Price -->
          <h5>Title Selection & Price</h5>
          <li>
            <b>Contract Currency: </b>
            <missing-control [control]="price.currency" link="../details"></missing-control>
          </li>
          <li *ngFor="let movie of movies$ | async">
            <b>{{ movie.main.title.international }}</b>
            <missing-control [control]="moviePrices[movie.id]" link="../details">
              <ng-template let-amount>{{ amount | currency: currency }}</ng-template>
            </missing-control>
          </li>
          <li>
            <b>Total Selection Price: </b>
            <missing-control [control]="price.amount" link="../details">
              <ng-template let-amount>{{ amount | currency: currency }}</ng-template>
            </missing-control>
          </li>
          <!-- Payment schedules -->
          <li>
            <!-- display list here -->
          </li>
        </ul>
      </mat-card-content>
    </mat-card>
  
    <!-- Distribution Deals -->
    <ng-container *ngFor="let movie of movies$ | async">
      <mat-card>
        <movie-banner [movie]="movie">
          <movie-banner-actions>
            <a mat-stroked-button color="primary" [routerLink]="['..', movie.id]">Edit</a>
          </movie-banner-actions>
        </movie-banner>
        <ng-container *ngIf="dealForms.get(movie.id) as deals" >
          <ng-container *ngIf="deals.value.length">
            <catalog-right-list [source]="deals.value"></catalog-right-list>
          </ng-container>
        </ng-container>
      </mat-card>
    </ng-container>
  </ng-container>
</tunnel-page>
