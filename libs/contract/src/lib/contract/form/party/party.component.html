<ng-container *ngFor="let control of form.controls; let i = index; let isLast = last; let isFirst = first;" [formGroup]="control">
    <form formGroupName="party">
        <div fxLayout="column" fxLayoutAlign="start start">
            <mat-form-field appearance="outline">
                <mat-label>Party name</mat-label>
                <input matInput type="text" formControlName="displayName" autocomplete="off" required>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Select role</mat-label>
                <mat-select formControlName="role">
                    <mat-option *ngFor="let role of staticRoles" [value]="role.slug">
                        {{ role.label }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline" *ngIf="hasRole && !isFirst">
                <mat-label>Select sub role</mat-label>
                <mat-select [formControl]="childRoleForm(i)">
                    <mat-option *ngFor="let role of staticSubRoles" [value]="role.slug">
                        {{ role.label }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <button (click)="form.removeAt(i)" mat-mini-fab color="warn" matTooltip="Remove role">
                <mat-icon>delete</mat-icon>
            </button>
        </div>
    </form>
</ng-container>
<button (click)="addRole()" mat-mini-fab color="primary" matTooltip="Add role">
    <mat-icon svgIcon="add"></mat-icon>
</button>