<ng-container *ngIf="expenses$ | async as expenses">
  <section>
    <button mat-button color="primary" [disabled]="!expenses.length" (click)="removeExpenses(expenses)">
      <mat-icon svgIcon="delete"></mat-icon>
      <span>Remove all expenses</span>
    </button>
  </section>
  <bf-table [source]="expenses" clickable useFilter pagination="50">
    <ng-template colRef="id" label="Id" let-id sort>
      {{ id }}
    </ng-template>
    <ng-template colRef="rightholderId" label="Rightholder" let-rightholderId sort>
      {{ rightholderId | rightholderName: waterfall }}
    </ng-template>
    <ng-template colRef="" label="Contract Id" let-item sort>
      {{ getCurrentContract({ contractId: item.contractId, date: item.date }) }}
    </ng-template>
    <ng-template colRef="date" label="Date" let-date sort defaultSort>
      {{ date | date: 'dd/MM/yyyy' }}
    </ng-template>
    <ng-template colRef="category" label="Category" let-category sort>
      {{ category }}
    </ng-template>
    <ng-template colRef="type" label="Type" let-type sort>
      {{ type }}
    </ng-template>
    <ng-template colRef="" label="Price" let-item sort>
      <ng-container *ngIf="toPricePerCurrency(item) as amount">
        <price-per-currency [price]="amount"></price-per-currency>
      </ng-container>
    </ng-template>
    <ng-template colRef="status" label="Status" let-status sort>
      {{ status | toLabel: 'paymentStatus' }}
    </ng-template>
    <ng-template colRef="" label="Action" let-expense sticky>
      <button mat-icon-button (click)="removeExpenses([expense])">
        <mat-icon svgIcon="delete" matTooltip="Delete expense"></mat-icon>
      </button>
    </ng-template>
  </bf-table>
</ng-container>
