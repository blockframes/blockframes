<section fxLayout="column" fxLayoutAlign="center center" test-id="creation-form">
  <h1>Create Organization </h1>
  <!-- SUPER ADMIN -->
  <form [formGroup]="superAdminForm">
    <mat-form-field appearance="outline">
      <mat-label>Super Admin Email</mat-label>
      <input matInput type="email" placeholder="Email" aria-label="email" formControlName="email" required test-id="super-admin-email"/>
      <mat-error *ngIf="superAdminForm.get('email').hasError('email') && !superAdminForm.get('email').hasError('required')">
        Please enter a <strong>valid</strong> email address.
      </mat-error>
      <mat-error *ngIf="superAdminForm.get('email').hasError('taken')">
        User of this email address already has an organization.
      </mat-error>
    </mat-form-field>
  </form>

  <static-select scope="appName" [control]="fromApp" [withoutValues]="['cms', 'crm', 'blockframes']" placeholder="From app" test-id="from-app">
    <mat-label>From App</mat-label>
  </static-select>

  <crm-organization-form [form]="form" disableCropper></crm-organization-form>

  <mat-form-field appearance="outline" *ngIf="showPreferredLanguage$ | async">
    <mat-label>Select Preferred Language</mat-label>
    <mat-select [formControl]="superAdminForm.get('preferredLanguage')">
      <mat-option *ngFor="let lang of languages | keyvalue" [value]="lang.key">
        {{ lang.value }}
      </mat-option>
    </mat-select>
    <mat-hint>Used to determine the language of the email invitation for the new Org Super Admin. Browser settings will then be used to determine in app language.</mat-hint>
  </mat-form-field>

  <button mat-flat-button color="accent" [disabled]="creatingOrg" (click)="addOrganization()" test-id="create">
    <span>Create</span>
    <mat-icon iconPositionEnd svgIcon="arrow_forward"></mat-icon>
  </button>
</section>
