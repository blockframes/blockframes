<div class="query" *ngFor="let control of form.controls; let i = index">
  <span>{{ control.get('method').value }}: </span>
  <div class="control" [ngSwitch]="control.get('method').value">
    <ng-container *ngSwitchCase="'where'">
      <form-text [form]="control.get('field')"></form-text>
      <form-select [form]="control.get('condition')"></form-select>
      <form-typed-field [formControl]="control.get('value')"></form-typed-field>
    </ng-container>
    <ng-container *ngSwitchCase="'orderBy'">
      <form-text [form]="control.get('field')"></form-text>
      <form-select [form]="control.get('direction')"></form-select>
    </ng-container>
  </div>
  <button mat-icon-button (click)="form.removeAt(i)" [disabled]="control.disabled">
    <mat-icon svgIcon="close"></mat-icon>
  </button>
</div>
<footer>
  <form-select [form]="method"></form-select>
  <button mat-icon-button (click)="add()" [disabled]="form.disabled || method.pristine">
    <mat-icon svgIcon="add"></mat-icon>
  </button>
</footer>
