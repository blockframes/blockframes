<financing-explorer-header>
  <label>Leos Carax</label>
  <h1>Annette</h1>

  <label>Logline</label>
  <p>A stand-up comedian, and his opera singer wife, have a 2 year old daughter with a surprising gift.</p>
</financing-explorer-header>

<main fxLayout="row" fxLayoutAlign="center">
  <div class="col-1">
    <img src="https://fakeimg.pl/407x542/" alt="movie cover">
    <financing-explorer-financing-details></financing-explorer-financing-details>

    <div class="funding-status">
      <div class="left-budget">
        <h3>
          Funded Budget
        </h3>
        <h4>{{ movie.principalInformations.fundedBudget }}</h4>
        <h5>
          <span class="key">Goal Budget:</span> <span class="value">{{ movie.principalInformations.goalBudget }}</span>
        </h5>
      </div>
      <div class="right-percent">
        <mat-progress-spinner
          class="spinner"
          color="primary"
          mode="determinate"
          [value]="(movie.principalInformations.percentage | number) * 100"
          diameter="120"
          strokeWidth="15"
        >
        </mat-progress-spinner>
        <div class="progress-value">{{ (movie.principalInformations.percentage | number) * 100 }} %</div>
      </div>
    </div>
    <div class="call-to-action">
      <div class="owner">
        <div class="pic">
          <img src="https://fakeimg.pl/74x74/" alt="movie cover">
        </div>
        <div class="details">
          <h3>{{ movie.principalInformations.director }}</h3>
          <p>{{ movie.principalInformations.directorShortBio }}</p>
        </div>
      </div>
      <div class="action contact">
        Contact Producer's Team
      </div>
      <div class="action invest">
        Investment
      </div>
      <div class="action download">
        Download scenario
      </div>
    </div>
    <div class="contributions">
      <h2>Contributions</h2>
      <div class="contribution" *ngFor="let contribution of movie.contributions | keyvalue">
        <h3>${{contribution.key}} and more</h3>
        <ng-container *ngFor="let item of contribution.value">
          <h4 class="key">{{ item.title }}</h4>
          <p class="value">{{ item.content }}</p>
        </ng-container>
        <h5>{{ contribution.value.length }} contributors</h5>
      </div>
    </div>
  </div>
  <div class="col-2">
    <div class="main-information">
      <h2>Principales Informations</h2>
      <div class="summary">
        <h3>About Film</h3>
        <ul class="kv-list">
          <li>
            <span class="key">Directed By</span> <span class="value">{{ movie.principalInformations.director }}</span>
          </li>
          <li>
            <span class="key">Produced By</span> <span class="value">{{ movie.principalInformations.producedBy }}</span>
          </li>
          <li>
            <span class="key">Cast</span> <span class="value">
              <span *ngFor="let item of movie.artistic.cast; let isLast=last">
                {{ item.name }}{{ !isLast?',':'' }}
              </span>
            </span>
          </li>
          <li>
            <span class="key">Product Stage</span> <span class="value">{{ movie.principalInformations.productionStage }}</span>
          </li>
          <li>
            <span class="key">International Sales</span> <span class="value">{{ movie.principalInformations.internationalSales }}</span>
          </li>
        </ul>
      </div>
      <div class="synopsis">
        <h3>Synopsis</h3>
        <p>{{ movie.principalInformations.synopsis }}</p>
      </div>
      <div class="assets">
        <h3>Key assets of the project</h3>
        <ul>
          <li *ngFor="let item of movie.principalInformations.keyAssets">{{ item }}</li>
        </ul>
      </div>
      <div class="keywords">
        <h3>Keywords</h3>
        <mat-chip-list>
          <mat-basic-chip *ngFor="let item of movie.principalInformations.keywords">{{ item }}</mat-basic-chip>
        </mat-chip-list>
      </div>
    </div>
    <div class="data">
      <mat-tab-group>
        <mat-tab label="Production">
          <h2>Production</h2>
          <h3>Informations</h3>
          <p class="key">Subvention</p>
          <p class="value">{{ movie.production.subvention }}</p>
          <p class="key">Shooting dates</p>
          <p class="value">{{ movie.production.shootingDate }}</p>
          <p class="key">Shooting locations</p>
          <p class="value">{{ movie.production.shootingLocations }}</p>
          <p class="key">Expected premiere</p>
          <p class="value">{{ movie.production.expectedPremiere }}</p>
          
          <hr class="large-hidden"/>

          <h3>Producer's History</h3>
          <div class="producer-history">
            <mat-accordion>
              <mat-expansion-panel *ngFor="let producerHistory of movie.production.producersHistory | keyvalue">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    {{ producerHistory.key }}
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="producer-history-sub-container" *ngFor="let movie of producerHistory.value">
                  <div class="poster-container">
                    <img [src]="movie.posterUrl">
                  </div>
                  <mat-card class="movie-card">
                    <mat-card-header>
                      <mat-card-subtitle>{{ movie.productionYear }}</mat-card-subtitle>
                      <mat-card-title>{{ movie.title }}</mat-card-title>
                    </mat-card-header>
                    
                    <mat-card-content>
                      <p class="key">Logline</p>
                      <p>{{ movie.logline }}</p>
                      <p class="key">Best distinctions</p>
                      <p *ngFor="let distinction of movie.bestDistinctions">{{ distinction }}</p>
                    </mat-card-content>
                    <mat-card-actions>
                        <a target="_blank" [attr.href]="movie.imdbUrl">More details on IMDB <mat-icon>arrow_right_alt</mat-icon></a>
                    </mat-card-actions>
                  </mat-card>
                </div>
              </mat-expansion-panel>
            </mat-accordion>
          </div>
        </mat-tab>
        <mat-tab label="Artistic">
          <h1>Artistic</h1>
        </mat-tab>
        <mat-tab label="Finance">
          <h1>Finance</h1>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
</main>

<financing-explorer-footer></financing-explorer-footer>
