<tunnel-page>
  <h4 title>LAST STEP</h4>
  <h1 subtitle>Summary Page</h1>
  <p description class="mat-body-1">
    Please verify that all the information you have entered is correct before submitting to Media Financiers for
    validation.
  </p>
  <ng-container tunnel-form>

    <div *ngIf="invalidFields.length" class="mat-body">
      <div class="mandatory-control">
        <span *ngIf="invalidFields.length">You have {{ invalidFields.length }} mandatory fields
          to fill in.</span>
        <span class="mandatory-control">
          {{ invalidFields | fromCamelCase | titlecase }}
        </span>
      </div>
    </div>

    <!-- MAIN INFORMATION -->
    <section id="main-information">
      <h3>Main Information</h3>
      <movie-summary-main [movie]="form" [link]="('main' | getPath)"></movie-summary-main>
    </section>

    <mat-divider></mat-divider>

    <!-- STORYLINE ELEMENTS -->

    <section id="storyline-elements">
      <h3>Storyline Elements</h3>
      <movie-summary-synopsis [movie]="form" [link]="('synopsis' | getPath)"></movie-summary-synopsis>
    </section>

    <mat-divider></mat-divider>

    <!-- PRODUCTION INFORMATION -->

    <section id="production-information">
      <h3>Production Information</h3>
      <movie-summary-production [movie]="form" [link]="('production' | getPath)"></movie-summary-production>
    </section>

    <mat-divider></mat-divider>

    <!-- ARTISTIC TEAM -->

    <section id="artistic-team">
      <h3>Artistic Team</h3>
      <movie-summary-artistic [movie]="form" [link]="('artistic' | getPath)"></movie-summary-artistic>
    </section>

    <mat-divider></mat-divider>

    <!-- SELECTION AND REVIEWS -->

    <section id="reviews">
      <h3>Selections and Reviews</h3>
      <movie-summary-review [movie]="form" [link]="('artistic' | getPath)"></movie-summary-review>
    </section>

    <mat-divider></mat-divider>

    <!-- ADDITIONAL INFORMATION -->

    <section id="additional-information">
      <h3>Additional Information</h3>
      <movie-summary-additional-information [movie]="form" [link]="('additional-information' | getPath)">
      </movie-summary-additional-information>
    </section>

    <mat-divider></mat-divider>

    <!-- SHOOTING INFORMATION -->
    <ng-container *ngIf="form | hasStatus: ['development', 'shooting', 'post_production', 'finished']">

      <section id="shooting-information">
        <h3>Shooting Information</h3>
        <movie-summary-shooting-information [movie]="form" [link]="('shooting-information' | getPath)">
        </movie-summary-shooting-information>
      </section>

      <mat-divider></mat-divider>
    </ng-container>

    <!-- SALES PITCH -->

    <ng-container *ngIf="form | hasStatus: ['development', 'shooting', 'post_production', 'finished']">

      <section id="sales-pitch">
        <h3>Sales Pitch</h3>
        <movie-summary-sales-pitch [movie]="form" [link]="('sales-pitch' | getPath)"></movie-summary-sales-pitch>
      </section>

      <mat-divider></mat-divider>
    </ng-container>

    <!-- TECHNICAL INFORMATION -->

    <section id="technical-information">
      <h3>Technical Information</h3>
      <movie-summary-technical-info [movie]="form" [link]="('technical-info' | getPath)"></movie-summary-technical-info>
    </section>

    <mat-divider></mat-divider>

    <!-- AVAILABLE MATERIALS -->

    <section id="available-materials">
      <h3>Available Materials</h3>
      <movie-summary-available-materials [movie]="form" [link]="('available-materials' | getPath)">
      </movie-summary-available-materials>
    </section>

    <mat-divider></mat-divider>

    <!-- PROMOTIONAL ELEMENTS -->

    <section id="promotional-elements">
      <h3>Promotional Elements</h3>
      <movie-summary-media-files [movie]="form" [link]="('media-files' | getPath)"></movie-summary-media-files>
      <movie-summary-media-images [movie]="form" [link]="('media-images' | getPath)"></movie-summary-media-images>
      <movie-summary-media-videos [movie]="form" [link]="('media-videos' | getPath)"></movie-summary-media-videos>
    </section>

    <mat-divider></mat-divider>

    <!-- FINANCING DETAILS -->

    <section id="financing-elements">
      <h3>Financing Elements</h3>
      <campaign-summary-budget [form]="campaignForm" [link]="('budget' | getPath)"></campaign-summary-budget>
      <campaign-summary-fundings [form]="campaignForm" [link]="'fundings' | getPath"></campaign-summary-fundings>
      <campaign-summary-profits [form]="campaignForm" [link]="'profits' | getPath"></campaign-summary-profits>
    </section>
    
    <mat-divider></mat-divider>
  
    <!-- CAMPAIGN -->
    <section id="campaign">
      <h3>Investment Campaign</h3>
      <campaign-summary-proposal [form]="campaignForm" link="../proposal"></campaign-summary-proposal>
            
      <campaign-summary-perks [form]="campaignForm" link="../perks"></campaign-summary-perks>
    </section>
  
    <!-- Submit -->
    <button test-id="submit" mat-flat-button color="accent" class="submit" (click)="submit()"
      [disabled]="isPublished$ | async">
      <span>Publish to Media Financiers</span>
      <mat-icon svgIcon="arrow_forward"></mat-icon>
    </button>
  </ng-container>

</tunnel-page>