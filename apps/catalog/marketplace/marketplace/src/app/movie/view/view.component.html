<ng-template *ngIf="loading$ | async">
  <mat-spinner color="accent" #loading></mat-spinner>
</ng-template>
<main *ngIf="(movie$ | async) as movie;" test-id="content">
  <header fxLayout="column">
    <h1>{{movie.main.title.original}}</h1>
    <div *ngFor="let director of movie.main.directors; let isLast = last">
      <span>a film by {{ director.firstName }} {{ director.lastName }} <span *ngIf="!isLast">&</span>
      </span>
    </div>
  </header>

  <span fxLayout="row nowrap" fxLayoutAlign="center center" class="view-content heart">
    <mat-divider></mat-divider>
    <button mat-icon-button class="heart-icon" (click)="addToWishlist()">
      <mat-icon svgIcon="heart"></mat-icon>
    </button>
  </span>

  <section fxLayout="row" class="view-content">

    <div fxLayout="column" class="poster-column">
      <mat-card class="movie-presentation">
        <!-- poster -->
        <ng-container *ngIf="movie.main.poster as poster">
          <img class="movie-poster" [src]="poster" alt="movie poster" />
        </ng-container>
        <!-- Reserved territories -->
        <catalog-reserved-territories></catalog-reserved-territories>
        <mat-divider [inset]="true"></mat-divider>
        <!-- Production information -->
        <catalog-production-information></catalog-production-information>
        <mat-divider [inset]="true"></mat-divider>
        <!-- Key Assets -->
        <movie-display-assets [assets]="movie.promotionalDescription.keyAssets"></movie-display-assets>
        <mat-divider [inset]="true"></mat-divider>
      </mat-card>
    </div>

    <div fxLayout="column" class="information-column">
      <mat-card class="informations" fxLayout="column">
        <!-- Promotional elements -->
        <catalog-promotional-elements></catalog-promotional-elements>
        <mat-divider [inset]="true"></mat-divider>
        <!-- Main informations -->
        <movie-display-principal-informations [main]="movie.main"></movie-display-principal-informations>
        <mat-divider [inset]="true"></mat-divider>
        <!-- Film details -->
        <movie-display-film-details [main]="movie.main" [salesInfo]="movie.salesInfo" [color]="color"
          [europeanQualification]="europeanQualification" [internationalPremiere]="internationalPremiere">
        </movie-display-film-details>
        <mat-divider [inset]="true"></mat-divider>
        <!-- Festival Prizes -->
        <movie-display-prizes [prizes]="movie.festivalPrizes.prizes"></movie-display-prizes>
        <mat-divider [inset]="true"></mat-divider>
        <!-- Languages -->
        <movie-display-version-info [main]="movie.main" [versionInfo]="movie.versionInfo">
        </movie-display-version-info>
        <mat-divider [inset]="true"></mat-divider>
        <!-- Synopsis -->
        <movie-display-synopsis [synopsis]="movie.main.shortSynopsis"></movie-display-synopsis>
        <mat-divider [inset]="true"></mat-divider>
        <!-- Keywords -->
        <movie-display-keywords [keywords]="movie.promotionalDescription.keywords"></movie-display-keywords>
        <mat-divider [inset]="true"></mat-divider>
      </mat-card>
    </div>
  </section>


  <div fxLayout="row" fxLayoutAlign="center end">
    <a test-id="distribution-right-link" mat-flat-button color="accent"
      [routerLink]="['/layout/o/catalog', movie.id, 'create']">
      Create distribution right
    </a>
  </div>
</main>
<!-- 
  <article>
            Availabilities -->
<!-- <movie-display-availabilities [rights]="movie.salesAgentDeal.rights"></movie-display-availabilities> -->
<!-- Production -->
<!--<movie-display-production [productionCompanies]="movie.main.productionCompanies"
  [broadcasterCoproducers]="movie.salesInfo.broadcasterCoproducers"></movie-display-production>
</article> -->