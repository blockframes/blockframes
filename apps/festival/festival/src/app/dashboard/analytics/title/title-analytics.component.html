<ng-container *ngIf="title$ | async as title">
  <header fxLayout="column" fxLayoutGap="20px" class="dark-contrast-theme" bgAsset="background_header.png" bgTheme="dark">
    <button mat-icon-button (click)="goBack()">
      <mat-icon svgIcon="arrow_back"></mat-icon>
    </button>

    <article fxLayout fxLayoutGap="24px">
      <a [routerLink]="['/c/o/marketplace/title/', title.id]">
        <img fxHide.lt-md [ref]="title.poster" asset="empty_poster.svg" alt="Movie Poster" class="poster">
      </a>

      <div fxFlex fxLayout="column">
        <p class="mat-body-1">{{ title.directors | displayName }}</p>
        <div fxLayout fxLayoutAlign="space-between">
          <h1 class="mat-display-1">{{ title.title.international }}</h1>
          <a mat-button [routerLink]="['/c/o/marketplace/title/', title.id]" class="film-page-button">
            <span>See Film Page</span>
          </a>
        </div>
        <h6>{{ title.genres | toLabel: 'genres' }}</h6>
      </div>
    </article>
  </header>

  <section>
    <h2>Interested Users</h2>
    <p class="mat-body-1">See how many users interacted with your movie (viewed your title, added to wishlist, requested a screening, etc).</p>

    <article class="surface" fxLayout="column" fxLayoutGap="16px">
      <a mat-button [routerLink]="['/c/o/dashboard']">
        <mat-icon svgIcon="arrow_back"></mat-icon>
        <span>Come back to Dashboard</span>
      </a>

      <div fxLayout fxLayout.lt-sm="column" fxLayoutGap="16px">
        <analytics-pie-chart fxFlex class="surface" [data]="orgActivity$ | async"></analytics-pie-chart>
        <analytics-map fxFlex class="surface" [data]="territoryActivity$ | async"></analytics-map>
      </div>
    </article>
  </section>
</ng-container>
