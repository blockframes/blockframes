<ng-container *ngIf="(event$ | async) as event; else loading">
  <ng-container [ngSwitch]="event.type">
    <!-- SCREENING TYPE -->
    <section *ngSwitchCase="'screening'" fxLayout="column" fxLayoutAlign="space-between center">
      <ng-container *ngIf="event.movie else noMovie">
        <ng-container *ngIf="showSession else showVideo">
          <article class="dark-contrast-theme screen" [bgRef]="event.movie.main.banner.media" bgAsset="empty_banner.webp">
            <div class="overlay" fxLayout="column" fxLayoutAlign="center center">
              <img class="organizationLogo" [ref]="event.org.logo" asset="empty_organization.webp" type="logo" alt="organisation logo">
              <h4>{{ event.org | orgName }} presents</h4>
              <span class="mat-display-2">{{ event.movie.main.title.international }}</span>
              <h2>by {{ event.movie.main.directors | displayName }}</h2>
              <span class="mat-caption">Screening now</span>
              <button test-id="play" mat-flat-button color="accent" (click)="showSession = false">
                <mat-icon svgIcon="play"></mat-icon>
                <span>Play</span>
              </button>
            </div>
          </article>
        </ng-container>

        <ng-template #showVideo>
          <article class="screen">
            <event-player class="overlay"></event-player>
          </article>
        </ng-template>

        <img asset="screening_now.webp" alt="Cinema room">
      </ng-container>

      <ng-template #noMovie>
        <p>There is no movie associated with this screening</p>
      </ng-template>
    </section>

    <!-- MEETING TYPE -->
    <section *ngSwitchCase="'meeting'" fxLayout="column" fxLayoutAlign="space-between center">

      <article class="dark-contrast-theme screen" bgAsset="meeting.webp">
        <div class="overlay" fxLayout="column" fxLayoutAlign="center center">
          <span class="mat-display-2">{{ event.title }}</span>
          <span class="mat-caption">Meeting now</span>
          <a *ngIf="event.meta.callUrl" mat-flat-button color="accent" [href]="event.meta.callUrl" target="_blank">
            <mat-icon svgIcon="play"></mat-icon>
            <span>Join the meeting</span>
          </a>
          <p *ngIf="!event.meta.callUrl">
            Contact <a [href]="'mailto:' + event.organizedBy.email">{{ event.organizedBy | displayName }}</a> to provide a link for the meeting
          </p>
        </div>
      </article>
      <!-- TODO update the picture here with Mathilde's picture, she needs to validate with Marie to create it -->
      <img asset="meeting.webp" alt="Meeting room">

    </section>
  </ng-container>
</ng-container>


<ng-template #loading>
  <section fxLayout="column" fxLayoutAlign="center center">
    <mat-spinner></mat-spinner>
  </section>
</ng-template>
