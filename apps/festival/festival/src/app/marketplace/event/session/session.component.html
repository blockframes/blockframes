<ng-container *ngIf="(event$ | async) as event; else loading">
  <ng-container [ngSwitch]="event.type">
    <!-- SCREENING TYPE -->
    <section *ngSwitchCase="'screening'" fxLayout="column" fxLayoutAlign="space-between center"  class="screening">
      <ng-container *ngIf="event.movie else noMovie">
        <ng-container *ngIf="showSession else showVideo">
          <article class="dark-contrast-theme screen" [bgRef]="event.movie.banner" bgAsset="empty_banner.webp">
            <div class="overlay" fxLayout="column" fxLayoutAlign="center center">
              <img class="organizationLogo" [ref]="event.org.logo" asset="empty_organization.webp" type="logo" alt="organisation logo">
              <h4>{{ event.org | orgName }} presents</h4>
              <span class="mat-display-2">{{ event.movie.title.international }}</span>
              <h2>by {{ event.movie.directors | displayName }}</h2>
              <span class="mat-caption">Screening now</span>
              <button test-id="play" mat-flat-button color="accent" (click)="showSession = false">
                <mat-icon svgIcon="play_arrow"></mat-icon>
                <span>Play</span>
              </button>
            </div>
          </article>
        </ng-container>

        <ng-template #showVideo>
          <article class="screen">
            <media-player [ref]="screeningFileRef" [eventId]="event.id" class="overlay"></media-player>
          </article>
        </ng-template>

        <img asset="screening_now.webp" alt="Cinema room">
      </ng-container>

      <ng-template #noMovie>
        <p>There is no movie associated with this screening</p>
      </ng-template>
    </section>

    <!-- MEETING TYPE -->
    <ng-container *ngSwitchCase="'meeting'">
      <section class="meeting">

        <div class="meeting-container">

          <ng-container *ngIf="!!event.meta.selectedFile">
            <media-viewer [event]="event" [style]="{width: mediaContainerSize}"></media-viewer>
          </ng-container>
          <meeting-video-room [style]="{width: visioContainerSize}"></meeting-video-room>

        </div>
        <ng-container *ngIf="event.isOwner">
          <media-control
            [event]="event"
            *ngIf="(event.meta.selectedFile | fileType) === 'pdf' || (event.meta.selectedFile | fileType) === 'video'"
          ></media-control>
          <event-meeting-media-list fxFlex="35%" [event]="event"></event-meeting-media-list>
        </ng-container>
      </section>

      <img *ngIf="!event.isOwner" asset="meeting.webp" alt="Meeting room">

    </ng-container>
  </ng-container>
</ng-container>


<ng-template #loading>
  <section fxLayout="column" fxLayoutAlign="center center">
    <mat-spinner></mat-spinner>
  </section>
</ng-template>

<video #autotester src="/assets/videos/blank.mp4" muted hidden></video>
