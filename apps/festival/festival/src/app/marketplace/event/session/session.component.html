<ng-container *ngIf="(event$ | async) as event; else loading">
  <ng-container [ngSwitch]="event.type">
    <!-- SCREENING TYPE -->
    <section *ngSwitchCase="'screening'" fxLayout="column" fxLayoutAlign="space-between center">

      <ng-container *ngIf="showSession else showVideo">
        <article class="dark-contrast-theme screen" [backgroundRef]="event.movie.promotionalElements.banner.media">
          <div class="overlay" fxLayout="column" fxLayoutAlign="center center">
            <img class="organizationLogo" [imgRef]="event.org.logo" placeholderAsset="empty_organization.webp" type="logo" alt="organisation logo">
            <h4>{{ event.org | orgName }} presents</h4>
            <span class="mat-display-2">{{ event.movie.main.title.international }}</span>
            <h2>by {{ event.movie.main.directors | displayName }}</h2>
            <span class="mat-caption">Screening now</span>
            <button mat-flat-button color="accent" (click)="showSession = false">
              <mat-icon svgIcon="play"></mat-icon>
              <span>Play</span>
            </button>
          </div>
        </article>
      </ng-container>

      <ng-template #showVideo>
        <article class="screen">
          <event-player class="overlay"></event-player>
        </article>
      </ng-template>

      <img asset="screening_now.webp" alt="Cinema room">

    </section>

    <!-- MEETING TYPE -->
    <section *ngSwitchCase="'meeting'" fxLayout="column" fxLayoutAlign="space-between center">

      <article class="dark-contrast-theme screen" [style.background-image]="'url(assets/images/meeting.webp)'">
        <div class="overlay" fxLayout="column" fxLayoutAlign="center center">
          <span class="mat-display-2">{{ event.title }}</span>
          <span class="mat-caption">Meeting now</span>
          <a mat-flat-button color="accent" [href]="event.meta.callUrl" target="_blank">
            <mat-icon svgIcon="play"></mat-icon>
            <span>Join the meeting</span>
          </a>
        </div>
      </article>
      <!-- TODO update the picture here with Mathilde's picture, she needs to validate with Marie to create it -->
      <img asset="screening_now.webp" alt="Meeting room">

    </section>
  </ng-container>
</ng-container>


<ng-template #loading>
  <mat-spinner></mat-spinner>
</ng-template>
