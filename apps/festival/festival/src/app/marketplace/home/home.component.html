<ng-container *ngIf="page$ | async as page">
  <ng-container *ngFor="let section of page.sections">
    <ng-container *ngTemplateOutlet="templates[section._type]; context: {$implicit: section}"></ng-container>
  </ng-container>
</ng-container>

<!-- Banner -->
<ng-template #banner let-section>
  <header class="banner dark-contrast-theme" [bgRef]="section.background" bgAsset="banner.png">
    <div class="banner-details">
      <h4 *ngIf="section.subtitle">{{ section.subtitle }}</h4>
      <h1 class="mat-display-2" *ngIf="section.title">{{ section.title }}</h1>
      <p *ngIf="section.description">{{ section.description }}</p>
      <div class="links">
        <ng-container *ngFor="let link of section.links">
          <ng-container *ngTemplateOutlet="linkBtn; context: {$implicit: link}"></ng-container>
        </ng-container>
      </div>
    </div>
    <img *ngIf="section.image?.storagePath" asset="" [ref]="section.image"/>
  </header>
</ng-template>

<!-- Hero -->
<ng-template #hero let-section>

</ng-template>

<!-- Titles -->
<ng-template #titles let-section>
  
</ng-template>

<!-- Orgs -->
<ng-template #orgs let-section>
  
</ng-template>

<!-- Slider -->
<ng-template #slider let-section>
  
</ng-template>

<!-- Events Slider -->
<ng-template #eventsSlider let-section>
  
</ng-template>

<!-- Org Titles -->
<ng-template #orgTitles let-section>
  
</ng-template>



<ng-template #linkBtn let-link>
  <ng-container *ngIf="link.type === 'basic'">
    <a mat-button [color]="link.color" [routerLink]="link.path | getLink" [queryParams]="link.path | getParams" [attr.test-id]="link.text">{{ link.text }}</a>
  </ng-container>
  <ng-container *ngIf="link.type === 'flat'">
    <a mat-flat-button [color]="link.color" [routerLink]="link.path | getLink" [queryParams]="link.path | getParams" [attr.test-id]="link.text">{{ link.text }}</a>
  </ng-container>
  <ng-container *ngIf="link.type === 'stroked'">
    <a mat-stroked-button [color]="link.color" [routerLink]="link.path | getLink" [queryParams]="link.path | getParams" [attr.test-id]="link.text">{{ link.text }}</a>
  </ng-container>
</ng-template>

