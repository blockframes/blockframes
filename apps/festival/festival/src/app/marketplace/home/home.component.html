<ng-container *ngIf="page$ | async as page">
  <ng-container *ngFor="let section of page.sections">
    <ng-container *ngTemplateOutlet="templates[section._type]; context: {$implicit: section}"></ng-container>
  </ng-container>
</ng-container>

<!-- Banner -->
<ng-template #banner let-section>

</ng-template>

<!-- Hero -->
<ng-template #hero let-section>

</ng-template>

<!-- Titles -->
<ng-template #titles let-section>
  <section class="titles cards">
    <header fxLayout fxLayoutAlign="space-between center">
      <h2>{{ section.title }}</h2>
      <a mat-button [routerLink]="section.link | getLink: '../title'" [queryParams]="section.link | getParams" color="primary" test-id="title-link">
        <span>See all</span>
        <mat-icon svgIcon="arrow_forward"></mat-icon>
      </a>
    </header>
    <ng-container *ngIf="section | queryTitles | async | sortBy:section.sorting as movies">
      <bf-carousel [columns]="{ gtMd: 4, md: 3, ltMd: 2 }">
        <ng-container *ngFor="let movie of movies">
          <ng-template carouselItem>
            <movie-card [movie]="movie" [size]="section.mode" [link]="['../title', movie.id]">
              <event-request-screening [movieId]="movie.id" iconOnly></event-request-screening>
            </movie-card>
          </ng-template>
        </ng-container>
      </bf-carousel>
    </ng-container>
  </section>
</ng-template>

<!-- Orgs -->
<ng-template #orgs let-section>
  
</ng-template>

<!-- Slider -->
<ng-template #slider let-section>
 
</ng-template>

<!-- Events Slider -->
<ng-template #eventsSlider let-section>
  
</ng-template>

<!-- Org Titles -->
<ng-template #orgTitles let-section>
  
</ng-template>



<ng-template #linkBtn let-link>
  <ng-container *ngIf="link.type === 'basic'">
    <a mat-button [color]="link.color" [routerLink]="link.path | getLink" [queryParams]="link.path | getParams" [attr.test-id]="link.text">{{ link.text }}</a>
  </ng-container>
  <ng-container *ngIf="link.type === 'flat'">
    <a mat-flat-button [color]="link.color" [routerLink]="link.path | getLink" [queryParams]="link.path | getParams" [attr.test-id]="link.text">{{ link.text }}</a>
  </ng-container>
  <ng-container *ngIf="link.type === 'stroked'">
    <a mat-stroked-button [color]="link.color" [routerLink]="link.path | getLink" [queryParams]="link.path | getParams" [attr.test-id]="link.text">{{ link.text }}</a>
  </ng-container>
</ng-template>

