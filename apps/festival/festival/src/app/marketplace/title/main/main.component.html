<ng-container *ngIf="(movie$ | async) as movie;" test-id="content" >
  <!-- STORY CARD -->
  <mat-card *ngIf="hasStory(movie)">
    <mat-card-header>
      <h3>Storyline Elements</h3>
    </mat-card-header>
    <mat-card-content>
      <ul>
        <li *ngIf="movie.story.synopsis as synopsis">
          <strong>Synopsis </strong><span class="synopsis">{{ synopsis }}</span>
        </li>
        <li *ngIf="movie.promotionalDescription.keywords.length > 0">
          <strong>Keywords </strong>
          <mat-chip-list fxLayout="row" fxLayoutGap="5px">
            <ng-container *ngFor="let keyword of movie.promotionalDescription.keywords">
              <mat-chip>{{ keyword }}</mat-chip>
            </ng-container>
          </mat-chip-list>
        </li>
        <li *ngIf="movie.promotionalDescription.keyAssets">
          <strong>Key Assets </strong><span>{{ movie.promotionalDescription.keyAssets }}</span>
        </li>
      </ul>
    </mat-card-content>
  </mat-card>

  <!-- GENERAL INFORMATION -->
  <mat-card>
    <mat-card-header>
      <h3>General Information</h3>
    </mat-card-header>
    <mat-card-content>
      <ul>
        <li *ngIf="movie.main.genres">
          <strong>Genre </strong>
          <ng-container *ngFor="let genre of movie.main.genres, let isLast=last">
            <span>{{ genre | translateSlug: 'GENRES' }}{{ isLast ? '' : ', '}} </span>
          </ng-container>
        </li>
        <li *ngIf="movie.main.directors">
          <strong>Director </strong>
          <span>{{ movie.main.directors | displayName }} </span>
        </li>
        <li *ngIf="movie.main.productionYear">
          <strong>Production Year </strong>
          <span>{{ movie.main.productionYear }} </span>
        </li>
        <li *ngIf="movie.main.originCountries">
          <strong>Country of Origin </strong>
          <ng-container *ngFor="let country of movie.main.originCountries; let isLast=last">
            {{ country | translateSlug: 'TERRITORIES' }}{{ isLast ? '' : ', ' }}
          </ng-container>
        </li>
        <li *ngIf="movie.main.originalLanguages">
          <strong>Original Language </strong>
          <ng-container *ngFor="let language of movie.main.originalLanguages; let isLast=last">
            <span>{{ language | translateSlug: 'LANGUAGES' }}{{ isLast ? '' : ', ' }}</span>
          </ng-container>
        </li>
      </ul>
    </mat-card-content>
  </mat-card>

  <!-- FESTIVALS -->
  <mat-card *ngIf="movie.festivalPrizes.prizes.length > 0">
    <mat-card-header>
      <h3>Festivals</h3>
    </mat-card-header>
    <mat-card-content>
      <ul>
        <ng-container *ngIf="movie.festivalPrizes.prizes as prizes">
          <li><strong>Festivals </strong></li>
          <li *ngFor="let prize of prizes">{{ getPrize(prize) | titlecase }}</li>
        </ng-container>
      </ul>
    </mat-card-content>
  </mat-card>

  <!-- CREDIT CARD -->
  <mat-card *ngIf="movie.salesCast || movie.main.stakeholders">
    <mat-card-header>
      <h3>Credits</h3>
    </mat-card-header>
    <mat-card-content>
      <ul>
        <ng-container *ngIf="movie.salesCast.cast.length > 0">
          <h5>Cast</h5>
          <li><strong i18n>Principal Cast </strong>
            <ng-container *ngFor="let cast of movie.salesCast.cast; let isLast = last">
              <span>{{ cast.firstName }} {{ cast.lastName }}{{ isLast? '' : ', '}}</span>
            </ng-container>
          </li>
        </ng-container>
        <ng-container *ngIf="movie.main.stakeholders || movie.salesCast.producers.length > 0">
          <h5>Company Credits</h5>
          <ng-container *ngIf="movie.main.stakeholders as stakeholders">
            <li *ngIf="stakeholders.executiveProducer.length > 0"><strong i18n>Production Companies</strong>
              <span> {{ getStakeholder(movie, 'executiveProducer') }}</span></li>
            <li *ngIf="stakeholders.coProducer.length > 0"><strong i18n>Co-Producer{stakeholders.coProducer.length,
                plural,=1 {} other {s}}</strong>
              <span> {{ getStakeholder(movie, 'coProducer') }}</span></li>
          </ng-container>
          <ng-container *ngIf="movie.salesCast.producers.length > 0">
            <li><strong i18n>Producer{movie.salesCast.producers.length, plural,=1 {} other {s}}</strong>
              <span> {{ getSalesCast(movie, 'producers', 'PRODUCER_ROLES') }}</span></li>
          </ng-container>
          <ng-container *ngIf="movie.main.stakeholders as stakeholders">
            <li *ngIf="stakeholders.distributor.length > 0"><strong i18n>Distributor{stakeholders.distributor.length,
                plural,=1 {} other {s}}</strong>
              <span> {{ getStakeholder(movie, 'distributor') }}</span></li>
            <li *ngIf="stakeholders.salesAgent.length > 0"><strong i18n>Sales Agent{stakeholders.salesAgent.length,
                plural,=1 {} other {s}}</strong>
              <span> {{ getStakeholder(movie, 'salesAgent') }}</span></li>
          </ng-container>
        </ng-container>
        <ng-container *ngIf="movie.salesCast.crew.length > 0">
          <h5>Artistic Crew</h5>
          <li *ngFor="let crew of getSalesCrew(movie, 'crew', 'CREW_ROLES')">
            <strong i18n>{{ crew.label }} </strong>
            <span>{{ crew.firstName }} {{ crew.lastName }}</span>
          </li>
        </ng-container>
      </ul>
    </mat-card-content>
  </mat-card>

  <!-- BUDGET CARD -->
  <mat-card *ngIf="hasBudget(movie)">
    <mat-card-header>
      <h3>Budget, Quota & Critics</h3>
    </mat-card-header>
    <mat-card-content>
      <ul>
        <li *ngIf="movie.budget.estimatedBudget.from && movie.budget.estimatedBudget.to">
          <strong>Budget </strong>
          <span>{{ budgetRange(movie.budget.estimatedBudget) }}</span>
        </li>
        <ng-container *ngIf="movie.budget.boxOffice.length > 0 && hasTerritory(movie)">
          <li *ngFor="let boxOffice of movie.budget.boxOffice">
            <strong>Box Office </strong>
            <span>
              <ng-container *ngIf="boxOffice.unit === 'boxoffice_dollar'">
                <mat-icon [svgIcon]="'USD'" class="currency-icon"></mat-icon>
              </ng-container>
              <ng-container *ngIf="boxOffice.unit === 'boxoffice_euro'">
                <mat-icon [svgIcon]="'EUR'" class="currency-icon"></mat-icon>
              </ng-container>
              {{ boxOffice.value | number }}
              <ng-container *ngIf="boxOffice.unit === 'admissions'">
                Admissions
              </ng-container>
              ({{ boxOffice.territory  | translateSlug: 'TERRITORIES'}})
            </span>
          </li>
        </ng-container>
        <li *ngIf="movie.salesInfo.certifications.length > 0"><strong>Quotas </strong>
          <span
            *ngFor="let quota of movie.salesInfo.certifications; let isLast = last">{{ quota | translateSlug: 'CERTIFICATIONS' }}{{ isLast ? '' : ', ' }}</span>
        </li>
        <li *ngIf="movie.salesInfo.rating.length > 0"><strong>Rating </strong>
          <span *ngFor="let rating of movie.salesInfo.rating; let isLast = last">
            {{ rating.country | translateSlug: 'TERRITORIES' }} : {{ rating.value }}{{ isLast ? '' : '; ' }}
          </span>
        </li>
        <li *ngIf="movie.movieReview.length > 0"><strong>Film Review </strong>
          <span *ngFor="let review of movie.movieReview">{{ review.criticName }} in {{ review.journalName}}
            "{{ review.criticQuote }}" {{ review.revueLink }}</span></li>
      </ul>
    </mat-card-content>
  </mat-card>

  <!-- TECHNICAL INFORMATION CARD -->
  <mat-card *ngIf="movie.salesInfo || movie.versionInfo">
    <mat-card-header>
      <h3>Technical Information</h3>
    </mat-card-header>
    <mat-card-content>
      <ul>
        <ng-container *ngIf="movie.salesInfo as salesInfo">
          <li *ngIf="salesInfo.format"><strong>Shooting Format </strong>
            <span>{{ salesInfo.format | translateSlug: 'MOVIE_FORMAT'}}</span></li>
          <li *ngIf="salesInfo.formatQuality"><strong>Format Quality </strong>
            <span>{{ salesInfo.formatQuality }}</span></li>
          <li *ngIf="salesInfo.color"><strong>Color / B&W </strong>
            <span>{{ salesInfo.color | translateSlug: 'COLORS'}}</span></li>
          <li *ngIf="salesInfo.soundFormat"><strong>Sound Format </strong>
            <span>{{ salesInfo.soundFormat | translateSlug: 'SOUND_FORMAT' }}</span></li>
        </ng-container>
        <li *ngIf="movie.versionInfo.languages"><strong>Versions </strong>
          <ng-container *ngFor="let version of movie.versionInfo.languages | keyvalue; let isLast = last">
            {{ version.key | translateSlug: 'LANGUAGES'}}:
            <ng-container *ngFor="let info of version.value | keyvalue; let isLast = last">
              <ng-container *ngIf="info.value">
                {{ info.key | translateSlug: 'VERSION_INFO' }}
              </ng-container>
            </ng-container>
            {{ isLast ? '' : '| ' }}
          </ng-container>
        </li>
      </ul>
    </mat-card-content>
  </mat-card>

</ng-container>
